!function(l){function e(e){for(var t,a,n=e[0],i=e[1],o=e[2],r=0,s=[];r<n.length;r++)a=n[r],Object.prototype.hasOwnProperty.call(u,a)&&u[a]&&s.push(u[a][0]),u[a]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(l[t]=i[t]);for(d&&d(e);s.length;)s.shift()();return h.push.apply(h,o||[]),c()}function c(){for(var e,t=0;t<h.length;t++){for(var a=h[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==u[o]&&(n=!1)}n&&(h.splice(t--,1),e=r(r.s=a[0]))}return e}var a={},u={0:0},h=[];function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=l,r.c=a,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:


function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},
r.p="https://saharetminan.github.io/";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var d=n;h.push([345,1]),c()}({135:function(e,t,a){var n,i,o;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){function e(){this.name="@barba/prefetch",this.version="2.1.6",this.toPrefetch=new Set}var t=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)};return e.prototype.install=function(e,t){void 0===t&&(t={});var a=t.root;void 0===a&&(a=document.body);var n=t.timeout;void 0===n&&(n=2e3),this.logger=new e.Logger(this.name),this.logger.info(this.version),this.barba=e,this.root=a,this.timeout=n},e.prototype.init=function(){var n=this;this.barba.prefetchIgnore?this.logger.warn("barba.prefetchIgnore is enabled"):this.barba.cacheIgnore?this.logger.warn("barba.cacheIgnore is enabled"):(this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target,a=n.barba.dom.getHref(t);n.toPrefetch.has(a)&&(n.observer.unobserve(t),n.barba.cache.has(a)?n.barba.cache.update(a,{action:"prefetch"}):n.barba.cache.set(a,n.barba.request(a,n.barba.timeout,n.barba.onRequestError.bind(n.barba,"barba")).catch(function(e){n.logger.error(e)}),"prefetch"))}})}),this.observe(),this.barba.hooks.after(this.observe,this))},e.prototype.observe=function(){var n=this;t(function(){n.root.querySelectorAll("a").forEach(function(e){var t=e,a=n.barba.dom.getHref(t);n.barba.cache.has(a)||n.barba.prevent.checkUrl(a)||n.barba.prevent.checkLink(t,{},a)||(n.observer.observe(e),n.toPrefetch.add(a))})},{timeout:this.timeout})},new e},"object"==r(t)&&void 0!==e?e.exports=o():void 0===(i="function"==typeof(n=o)?n.call(t,a,t,e):n)||(e.exports=i)},137:function(e,t){function a(a,n,i){var o,r,s,l=null,c=0;i=i||{};function u(){c=!1===i.leading?0:Date.now(),l=null,s=a.apply(o,r),l||(o=r=null)}return function(){var e=Date.now();c||!1!==i.leading||(c=e);var t=n-(e-c);return o=this,r=arguments,t<=0||n<t?(l&&(clearTimeout(l),l=null),c=e,s=a.apply(o,r),l||(o=r=null)):l||!1===i.trailing||(l=setTimeout(u,t)),s}}a.throttle=a,e.exports=a},344:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);a(138);function m(e){return r.getComputedStyle(e)}var n,w=a(3),x=a(0),i=a(1),o=i.e.document,r="undefined"!=typeof window?window:o.defaultView||{getComputedStyle:function(){}},h=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,v=-1!==((i.e.navigator||{}).userAgent||"").indexOf("Edge"),d={rect:["width","height"],circle:["r","r"],ellipse:["rx","ry"],line:["x2","y2"]};function f(e,t,a,n,i,o){return a=(parseFloat(a||0)-parseFloat(e||0))*i,n=(parseFloat(n||0)-parseFloat(t||0))*o,Math.sqrt(a*a+n*n)}function p(e){return"string"!=typeof e&&e.nodeType||(e=i.e.TweenLite.selector(e)).length&&(e=e[0]),e}function y(e){if(!e)return 0;var t,a,n,i,o,r,s,l=(e=p(e)).tagName.toLowerCase(),c=1,u=1;"non-scaling-stroke"===e.getAttribute("vector-effect")&&(u=e.getScreenCTM(),c=Math.sqrt(u.a*u.a+u.b*u.b),u=Math.sqrt(u.d*u.d+u.c*u.c));try{a=e.getBBox()}catch(e){console.log("Error: Some browsers like Firefox won't report measurements of invisible elements (like display:none or masks inside defs).")}if(a&&(a.width||a.height)||!d[l]||(a={width:parseFloat(e.getAttribute(d[l][0])),height:parseFloat(e.getAttribute(d[l][1]))},"rect"!==l&&"line"!==l&&(a.width*=2,a.height*=2),"line"===l&&(a.x=parseFloat(e.getAttribute("x1")),a.y=parseFloat(e.getAttribute("y1")),a.width=Math.abs(a.width-a.x),a.height=Math.abs(a.height-a.y))),"path"===l)i=e.style.strokeDasharray,e.style.strokeDasharray="none",t=e.getTotalLength()||0,c!==u&&console.log("Warning: <path> length cannot be measured accurately when vector-effect is non-scaling-stroke and the element isn't proportionally scaled."),t*=(c+u)/2,e.style.strokeDasharray=i;else if("rect"===l)t=2*a.width*c+2*a.height*u;else if("line"===l)t=f(a.x,a.y,a.x+a.width,a.y+a.height,c,u);else if("polyline"===l||"polygon"===l)for(n=e.getAttribute("points").match(h)||[],"polygon"===l&&n.push(n[0],n[1]),t=0,o=2;o<n.length;o+=2)t+=f(n[o-2],n[o-1],n[o],n[o+1],c,u)||0;else"circle"!==l&&"ellipse"!==l||(r=a.width/2*c,s=a.height/2*u,t=Math.PI*(3*(r+s)-Math.sqrt((3*r+s)*(r+3*s))));return t||0}function g(e,t){if(!e)return[0,0];e=p(e),t=t||y(e)+1;var a=m(e),n=a.strokeDasharray||"",i=parseFloat(a.strokeDashoffset),o=n.indexOf(",");return o<0&&(o=n.indexOf(" ")),t<(n=o<0?t:parseFloat(n.substr(0,o))||1e-5)&&(n=t),[Math.max(0,-i),Math.max(0,n-i)]}(n=i.e._gsDefine.plugin({propName:"drawSVG",API:2,version:"0.2.1",global:!0,overwriteProps:["drawSVG"],init:function(e,t,a,n){if(!e.getBBox)return!1;var i,o,r,s,l,c,u,h,d,f,p=y(e)+1;return this._style=e.style,this._target=e,"function"==typeof t&&(t=t(n,e)),!0===t||"true"===t?t="0 100%":t?-1===(t+"").indexOf(" ")&&(t="0 "+t):t="0 0",i=g(e,p),l=t,c=p,u=i[0],f=l.indexOf(" "),d=-1===f?(h=void 0!==u?u+"":l,l):(h=l.substr(0,f),l.substr(f+1)),h=-1!==h.indexOf("%")?parseFloat(h)/100*c:parseFloat(h),o=(d=-1!==d.indexOf("%")?parseFloat(d)/100*c:parseFloat(d))<h?[d,h]:[h,d],this._length=p+10,0===i[0]&&0===o[0]?(r=Math.max(1e-5,o[1]-p),this._dash=p+r,this._offset=p-i[1]+r,this._offsetPT=this._addTween(this,"_offset",this._offset,p-o[1]+r,"drawSVG")):(this._dash=i[1]-i[0]||1e-6,this._offset=-i[0],this._dashPT=this._addTween(this,"_dash",this._dash,o[1]-o[0]||1e-5,"drawSVG"),this._offsetPT=this._addTween(this,"_offset",this._offset,-o[0],"drawSVG")),v&&(s=m(e)).strokeLinecap!==s.strokeLinejoin&&(o=parseFloat(s.strokeMiterlimit),this._addTween(e.style,"strokeMiterlimit",o,o+1e-4,"strokeMiterlimit")),this._live="non-scaling-stroke"===e.getAttribute("vector-effect")||-1!==(t+"").indexOf("live"),!0},set:function(e){if(this._firstPT){if(this._live){var t,a=y(this._target)+11;a!==this._length&&(t=a/this._length,this._length=a,this._offsetPT.s*=t,this._offsetPT.c*=t,this._dashPT?(this._dashPT.s*=t,this._dashPT.c*=t):this._dash*=t)}this._super.setRatio.call(this,e),this._style.strokeDashoffset=this._offset,this._style.strokeDasharray=1===e||0===e?this._offset<.001&&this._length-this._dash<=10?"none":this._offset===this._dash?"0px, 999999px":this._dash+"px,"+this._length+"px":this._dash+"px,"+this._length+"px"}}})).getLength=y,n.getPosition=g;var s=a(43),l=a.n(s),c=a(135),u=a.n(c);function A(){return window.innerWidth<=768}function _(){return"ontouchstart"in document}function P(){return document.querySelector(".page-container").getAttribute("data-barba-pagename")}var b=new function(){var e=this;this.obj=document.querySelector("#cursor"),this.inner=document.querySelector("#cursor .inner"),this.outer=document.querySelector("#cursor .outer"),this.top=document.querySelector("#cursor .top"),this.bottom=document.querySelector("#cursor .bottom"),x.a.set(this.top,{scale:.6,transformOrigin:"50% 50%"}),x.a.set(this.bottom,{scale:.6,transformOrigin:"50% 50%"}),this.down=function(){x.a.to(e.inner,.6,{scale:.06})},this.up=function(){x.a.to(e.inner,.6,{scale:.08})},this.hoverin=function(){x.a.to(e.inner,.3,{autoAlpha:0,ease:Power1.easeInOut}),x.a.to(e.outer,.8,{drawSVG:"100%",rotation:55,ease:Power2.easeOut})},this.hoverout=function(){x.a.to(e.inner,.3,{autoAlpha:1,ease:Power1.easeInOut}),x.a.to(e.outer,.8,{drawSVG:"0%",rotation:-120,ease:Power2.easeOut})},this.showarrow=function(){x.a.to(e.top,.3,{autoAlpha:1,y:-20}),x.a.to(e.bottom,.3,{autoAlpha:1,y:20})},this.hidearrow=function(){x.a.to(e.top,.3,{autoAlpha:0,y:0}),x.a.to(e.bottom,.3,{autoAlpha:0,y:0})}};


function F(e,t){var r,a,s,l,c,u,h,d=t||!1,f=e,p="https://saharetminan.github.io/src/media/cover/",m=new w.n,v=[],y=[],g=0,A=0;return new Promise(function(o){f.forEach(function(n,i){(s=document.createElement("a")).href="./"+n.route,(c=s.cloneNode()).innerHTML=n.title_,n.title_.split("").forEach(function(e){if("\n"==e)s.innerHTML+="<br>";else{var t=document.createElement("span");t.style.display="inline-block";var a=Math.round(5*Math.random())+5;t.setAttribute("data-delta",a),x.a.set(t,{x:"-"+8*a+"%",skewX:a/1.6,autoAlpha:0,force3D:!0,transformOrigin:"0% 100%"}),t.innerHTML=" "==e?"&nbsp;":e,s.appendChild(t)}}),(a=document.createElement("h1")).classList.add("grid-main-title","grid-main-title-"+n.id),a.appendChild(s),(l=document.createElement("h2")).classList.add("grid-list-title","grid-list-title-"+n.id),l.appendChild(c),_()||(l.addEventListener("mouseover",b.hoverin),l.addEventListener("mouseleave",b.hoverout)),l.addEventListener(_()?"touchstart":"mousedown",function(e){e.stopPropagation()},{passive:!1}),a.addEventListener(_()?"touchstart":"mousedown",function(e){e.stopPropagation()},{passive:!1}),document.querySelector("#grid-main-title").appendChild(a),document.querySelector("#grid-list-title").appendChild(l),x.a.set([a,l],{rotation:.1,force3D:!0}),(r=document.createElement("section")).classList.add("film-container","film-container-"+n.id),r.setAttribute("data-render-target",n.id),r.setAttribute("data-render-name",n.title),n.image_list.forEach(function(e,t){(h=document.createElement("IMG")).classList.add("data-list-img","data-list-img-"+(t+1)),h.src=p+n.route+"/"+e,r.appendChild(h)}),m.load(p+n.route+"/"+n.image,function(e){if(e.minFilter=w.d,g++,d&&!_()){y[i]=e;for(var t=function(t){(u=document.createElement("VIDEO")).classList.add("data-render-texture","data-render-texture-"+n.id,"column-"+t),u.style.display="none",u.src=p+n.route+"/"+n.video,u.setAttribute("preload","auto"),u.setAttribute("loop","loop"),u.muted=!0,u.setAttribute("playsinline","playsinline"),u.setAttribute("crossOrigin","anonymous"),r.appendChild(u),u.addEventListener("canplaythrough",function e(){this.removeEventListener("canplaythrough",e),A++,v[i+f.length*t]=new w.s(this),A==3*f.length&&o({g:v,l:y})})},a=0;a<3;a++)t(a)}else v[i]=e,g==f.length&&o(v)}),document.querySelector("#grid-html").appendChild(r)})})}var T,O,E={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};function L(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}function S(e){this._mesh=new w.f(O,e)}Object.assign(L.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),L.FullScreenQuad=(T=new w.h(-1,1,1,-1,0,1),O=new w.i(2,2),Object.defineProperty(S.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(S.prototype,{render:function(e){e.render(this._mesh,T)}}),S);function I(e,t){L.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof w.m?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=w.o.clone(e.uniforms),this.material=new w.m({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new L.FullScreenQuad(this.material)}I.prototype=Object.assign(Object.create(L.prototype),{constructor:I,render:function(e,t,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}});function N(e,t){L.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}N.prototype=Object.assign(Object.create(L.prototype),{constructor:N,render:function(e,t,a){var n,i,o=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),i=this.inverse?(n=0,1):(n=1,0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),r.buffers.stencil.setFunc(o.ALWAYS,n,4294967295),r.buffers.stencil.setClear(i),r.buffers.stencil.setLocked(!0),e.setRenderTarget(a),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(o.EQUAL,1,4294967295),r.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),r.buffers.stencil.setLocked(!0)}});function M(){L.call(this),this.needsSwap=!1}M.prototype=Object.create(L.prototype),Object.assign(M.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});function X(e,t){if(this.renderer=e,void 0===t){var a={minFilter:w.d,magFilter:w.d,format:w.k,stencilBuffer:!1},n=e.getSize(new w.p);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new w.t(this._width*this._pixelRatio,this._height*this._pixelRatio,a)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new I(E),this.clock=new w.a}Object.assign(X.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,a,n=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(a=0;a<o;a++)if(!1!==(t=this.passes[a]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var r=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(r.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(r.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof N?i=!0:t instanceof M&&(i=!1)}this.renderer.setRenderTarget(n)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new w.p);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var a=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(a,n),this.renderTarget2.setSize(a,n);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(a,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});function D(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}var k,H;function Y(e){this._mesh=new w.f(H,e)}Object.assign(D.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),D.FullScreenQuad=(k=new w.h(-1,1,1,-1,0,1),H=new w.i(2,2),Object.defineProperty(Y.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(Y.prototype,{render:function(e){e.render(this._mesh,k)}}),Y);function U(e,t,a,n,i){L.call(this),this.scene=e,this.camera=t,this.overrideMaterial=a,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1}U.prototype=Object.assign(Object.create(L.prototype),{constructor:U,render:function(e,t,a){var n,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(n=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:a),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(n,i),this.scene.overrideMaterial=null,e.autoClear=o}});var C={uniforms:{tDiffuse:{value:null},resolution:{value:new w.p(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@x.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")},R={uniforms:{DistortDelta:{type:"f",value:3}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float DistortDelta;\n    varying vec2 vUv;\n\n    vec2 barrelDistortion( vec2 p, vec2 amt )\n    {\n        p = 2.0 * p - 1.0;\n\n        float maxBarrelPower = sqrt(5.0);\n        float radius = dot(p,p);\n        p *= pow(vec2(radius), maxBarrelPower * amt);\n        return p * 0.5 + 0.5;\n    }\n\n    vec2 brownConradyDistortion(vec2 uv, float scalar)\n    {\n        uv = (uv - 0.5 ) * 2.0;\n        \n            float barrelDistortion1 = -0.015 * scalar;\n            float barrelDistortion2 = -0.005 * scalar;\n\n            float r2 = dot(uv,uv);\n            uv *= 1.0 + barrelDistortion1 * r2 + barrelDistortion2 * r2 * r2;\n            return (uv / 2.0) + 0.5;\n        \n    }\n\n\n    void main() {\n        vec2 p = vUv;\n        float scalar = DistortDelta;\n        vec4 colourScalar = vec4(660.0, 740.0, 620.0, 1.0);\n        colourScalar /= max(max(colourScalar.x, colourScalar.y), colourScalar.z);\n        colourScalar *= scalar;\n\n        vec4 distortion = vec4(0.);\n        distortion.r += texture2D(tDiffuse, brownConradyDistortion(p, colourScalar.r)).r;\n        distortion.g += texture2D(tDiffuse, brownConradyDistortion(p, colourScalar.g)).g;\n        distortion.b += texture2D(tDiffuse, brownConradyDistortion(p, colourScalar.b)).b;\n\n        gl_FragColor = vec4(distortion.rgb,1.0);\n    }\n    "};function Q(e,t,a,n,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var W=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.objData=e,this.renderer,this.composer,this.filmPass,this.copyPass,this.fxaaPass,this.scene,this.camera,this.totalCount=this.objData.length,this.projectCount=this.listCount=t,this.rows=this.projectCount+5,this.cols=7,this.scrollAble=!0,this.wheel=!1,this.loadMore=8,this.geometry=new w.j(1,1,1,1),this.col=[],this.group=new w.g,this.mesh=[],this.texture=[],this.textureL=[],this.lists=[],this.list=new w.g,this.case,this.caseNext,this.active=new w.p(3,this.projectCount),this.active_=new w.p(3,this.projectCount),this.activeL=0,this.isGrid=!0,this.meshGW=42*(window.innerWidth<=768?1.6:1),this.meshGH=24*(window.innerWidth<=768?1.6:1),this.meshGW_=this.meshGW*window.innerWidth/100,this.meshGH_=this.meshGH*window.innerWidth/100,this.meshLW=this.meshGW/1.7,this.meshLH=this.meshGH/1.7,this.meshLW_=this.meshLW*window.innerWidth/100,this.meshLH_=this.meshLH*window.innerWidth/100,this.meshM=2,this.meshM_=this.meshM*window.innerWidth/100,this.rAngle=-8,this.rotate=this.rAngle*Math.PI/180,this.offset=new w.q((this.meshGW+this.meshM)*window.innerWidth/100*.5,this.rows%2!=0?(this.meshGH+this.meshM)*window.innerWidth/100/2:0,0),this.pos=new w.p(0,(this.meshGH_+this.meshM_)*this.rows/2-this.projectCount*(this.meshGH_+this.meshM_)-(this.rows%2!=0?(this.meshGH+this.meshM)*window.innerWidth/100/-2:0)),this.tar=this.pos.clone(),this.boundG=new w.r((this.meshGH_+this.meshM_)*this.rows/2-2*(this.meshGH_+this.meshM_),(this.meshGW_+this.meshM_)*this.cols/2-window.innerWidth*(window.innerWidth<=768?1.6:1),-(this.meshGH_+this.meshM_)*this.rows/2+3*(this.meshGH_+this.meshM_),-(this.meshGW_+this.meshM_)*this.cols/2+window.innerWidth*(window.innerWidth<=768?.73:.76)*(window.innerWidth<=768?1.6:1)),this.boundL=new w.r(0,0,-(this.meshLH_+this.meshM_)*(this.listCount-1),0),this.bound=this.boundG.clone(),this.stats,this.loading=!1,this.done=!1}var e,t,n,s,i;return e=a,(t=[{key:"getActiveRender",value:function(){return"index"==P()?this.col[this.active.x].children[this.active.y].userData.id:document.querySelector(".page-container").getAttribute("data-render")}},{key:"getTexture",value:function(){return this.col[this.active.x].children[this.active.y].material.uniforms.tDiffuse.value.image}},{key:"createMat",value:function(e,t){var a=t||!1;return new w.m({uniforms:{tDiffuse:{value:e},colors:{value:a?new w.q(.25,.25,.25):new w.q(1,1,1)},translate:{value:new w.p},maskDelta:{value:1},blur:{value:0},vOpacity:{type:"f",value:a?1:0}},side:w.c,vertexShader:"\n    varying vec2 vUv;\n    void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform vec3 colors;\n    uniform float vOpacity;\n    uniform float maskDelta;\n    uniform vec2 translate;\n    uniform float blur;\n\n    varying vec2 vUv;\n\n\tfloat rand(vec2 co){\n        return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 9527.);\n    }\n    \n    vec2 Sample(in float theta, inout float r)\n    {\n        r += 1.0 / r;\n        return (r-1.0) * vec2(cos(theta), sin(theta));\n    }\n\n    void main() {\n        vec2 p = vUv;\n        float bluramount = blur;\n        vec4 texoutput;\n\n\t\tvec3 blurred_image = vec3(0.);\n\n        if(blur>0.) {\n\n            vec3 acc = vec3(0.0);\n            vec3 div = vec3(0.0);\n            vec2 pixel = vec2(vUv.y/vUv.x, 1.0) * blur * .006;\n            float r = 1.0;\n            for (float j = 0.0; j < 359.9944845; j += 2.39996323)\n            {\n                \n                vec3 col = texture2D(tDiffuse, p + pixel * Sample(j, r), blur*1.5).xyz;\n                vec3 bokeh = vec3(5.0) + pow(col, vec3(9.0)) * 200.;\n                acc += col * bokeh;\n                div += bokeh;\n            }\n\n            texoutput = vec4(vec3(acc/div), 1.0);\n        }\n        else { \n            texoutput = texture2D(tDiffuse, p - translate );\n        }\n\n        vec2 fc = 1.0 - step(maskDelta, abs(2.0*p-1.0));\n        float fact = fc.x*fc.y;\n        gl_FragColor = vec4(texoutput.rgb*colors, vOpacity)*fact;\n    }\n    ",transparent:!0})}},{key:"cloneMat",value:function(e,t,a,n){var i=this,o=e||!1,r=t||!1,s=a||this.projectCount,l=n||!1;return new Promise(function(e){if(l)e(i.col[3].children[i.projectCount].material.clone());else if(o){var t=Math.abs(s-i.totalCount)+1;t>i.rows-2?_()?e(i.col[3].children[t%i.projectCount].material.clone()):e(i.createMat(new w.s(i.col[3].children[t%i.projectCount].material.uniforms.tDiffuse.value.image),!0)):_()?e(i.col[3].children[t].material.clone()):e(i.createMat(new w.s(i.col[3].children[t].material.uniforms.tDiffuse.value.image),!0))}else i.isGrid&&!r?_()?e(i.col[i.active_.x].children[i.active_.y].material.clone()):e(i.createMat(new w.s(i.col[i.active_.x].children[i.active_.y].material.uniforms.tDiffuse.value.image),!0)):e(i.col[3].children[Math.abs(s-i.totalCount)].material.clone())})}},{key:"init",value:function(){this.setupScene();for(var e=0;e<this.cols;e++){this.col[e]=new w.g;for(var t=0;t<this.rows;t++){var a=(t+(3==e?0:e<3?2*e:3<e?2*(e-3):0))%this.projectCount;this.mesh[e*this.rows+t]=new w.f(this.geometry,this.createMat(this.texture[a+(_()?0:this.projectCount*(e%3))],!1)),this.mesh[e*this.rows+t].material.uniforms.colors.value={x:.25,y:.25,z:.25},this.mesh[e*this.rows+t].userData.id=document.querySelectorAll(".film-container")[a].getAttribute("data-render-target"),this.mesh[e*this.rows+t].scale.set(this.meshGW_,this.meshGH_,1),this.mesh[e*this.rows+t].position.set((this.meshGW_+this.meshM_)*e-(this.meshGW_+this.meshM_)*this.cols/2,-(this.meshGH_+this.meshM_)*t+(this.meshGH_+this.meshM_)*this.rows/2,-2).add(this.offset),this.col[e].add(this.mesh[e*this.rows+t])}this.group.add(this.col[e])}this.scene.add(this.group),this.add(0,this.listCount,!0),this.list.visible=!1,this.scene.add(this.list),this.startAnimation(),this.done=!0}},{key:"setupScene",value:function(){this.renderer=new w.u({alpha:!0}),this.renderer.setClearColor(16777215,0),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(1),this.camera=new w.h(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e3),this.camera.position.z=-500,this.scene=new w.l,this.scene.background=new w.b(1579032),this.scene.add(this.camera),document.getElementById("canvas1").appendChild(this.renderer.domElement),this.composer=new X(this.renderer),this.composer.addPass(new U(this.scene,this.camera)),this.copyPass=new I(E),this.copyPass.renderToScreen=!0,this.filmPass=new I(R),this.filmPass.uniforms.DistortDelta.value=0,this.fxaaPass=new I(C),this.fxaaPass.material.uniforms.resolution.value=new w.p(1/window.innerWidth,1/window.innerHeight),this.composer.addPass(this.fxaaPass),this.composer.addPass(this.copyPass),this.composer.addPass(this.filmPass)}},{key:"startAnimation",value:function(){var e=this;_()||this.getTexture().play(),x.a.to(["#logo","#menu-button"],1,{autoAlpha:1,delay:3}),"index"==P()?(x.a.to(".grid-main-title-"+this.getActiveRender(),.6,{autoAlpha:1,ease:Power1.easeOut,delay:4}),document.querySelectorAll(".grid-main-title-"+this.getActiveRender()+" span").forEach(function(e){x.a.to(e,e.getAttribute("data-delta")/10,{autoAlpha:1,skewX:0,x:"0%",delay:4+(1-e.getAttribute("data-delta")/12)/1.5,ease:Power2.easeOut})}),x.a.to(["#drag","#grid-list-toggle"],1,{autoAlpha:1,delay:4}),window.innerWidth/this.meshGW*this.meshGH<window.innerHeight?this.col[this.active.x].children[this.active.y].scale.set(window.innerHeight/this.meshGH*this.meshGW,window.innerHeight,1):this.col[this.active.x].children[this.active.y].scale.set(window.innerWidth,window.innerWidth/this.meshGW*this.meshGH,1),this.col[this.active.x].children[this.active.y].position.z=-1,this.col[this.active.x].children[this.active.y].material.uniforms.blur.value=5,this.col[this.active.x].children[this.active.y].material.uniforms.colors.value={x:1,y:1,z:1},x.a.to(this.col[this.active.x].children[this.active.y].material.uniforms.vOpacity,2,{value:1,ease:Power1.easeOut}),x.a.to(this.col[this.active.x].children[this.active.y].material.uniforms.blur,3,{value:0,ease:Power1.easeOut,onComplete:function(){e.mesh.forEach(function(e){return x.a.to(e.material.uniforms.vOpacity,.6,{value:1,ease:Power1.easeOut,delay:1.2})}),x.a.to(e.camera.rotation,1.6,{z:e.rotate,ease:Power2.easeInOut}),x.a.to(e.col[e.active.x].children[e.active.y].scale,1.6,{x:e.meshGW_,y:e.meshGH_,ease:Power2.easeInOut,onComplete:function(){e.col[e.active.x].children[e.active.y].position.z=-2}}),x.a.to("#instruction",1.6,{autoAlpha:1,ease:Power1.easeOut,delay:1})}})):"case"==P()?(this.active.y=this.active_.y=Math.abs(this.getActiveRender()-this.totalCount),this.active.y>this.projectCount&&(this.active.y=this.active_.y=0),this.col[this.active.x].children[this.active.y].material.uniforms.colors.value=new w.q(1,1,1),document.querySelector("#grid-main-title").classList.add("active"),this.mesh.forEach(function(e){e.material.uniforms.vOpacity.value=0,e.visible=!1})):this.mesh.forEach(function(e){e.material.uniforms.vOpacity.value=0,e.visible=!1})}},{key:"load",value:(s=regeneratorRuntime.mark(function e(a,t,n){var i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=n||!1)||x.a.to("#loading-list",.2,{autoAlpha:1}),e.next=4,F(this.objData.slice(a,t),i).then(function(e){_()?e.forEach(function(e,t){o.texture[t+a]=o.textureL[t+a]=e}):i?(e.g.forEach(function(e,t){o.texture[t]=e}),e.l.forEach(function(e,t){o.textureL[t]=e})):e.forEach(function(e,t){o.textureL[t+a]=e}),i?o.init():o.add(a,t)});case 4:case"end":return e.stop()}},e,this)}),i=function(){var e=this,r=arguments;return new Promise(function(t,a){var n=s.apply(e,r);function i(e){Q(n,t,a,i,o,"next",e)}function o(e){Q(n,t,a,i,o,"throw",e)}i(void 0)})},function(e,t,a){return i.apply(this,arguments)})},{key:"add",value:function(e,t,a){for(var n=a||!1,i=e;i<t;i++)this.lists[i]=new w.f(this.geometry,this.createMat(this.textureL[i],n)),this.lists[i].userData.id=document.querySelectorAll(".film-container")[i].getAttribute("data-render-target"),this.lists[i].scale.set(this.meshLW_,this.meshLH_,1),this.lists[i].position.set((window.innerWidth/2-this.meshLW_)/2,-(this.meshLH_+this.meshM_)*i,-1),this.list.add(this.lists[i]);x.a.set(".grid-list-title",{y:-this.meshLH_/2,height:this.meshLH_,marginBottom:this.meshM_}),n||(this.lists.slice(e,t).forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.6,{value:1,ease:Power1.easeOut})}),x.a.to("#loading-list",.4,{autoAlpha:0,delay:.6}),x.a.to(".grid-list-title",.6,{autoAlpha:1,ease:Power1.easeInOut}),this.listCount=t,this.boundL=new w.r(0,0,-(this.meshLH_+this.meshM_)*(this.listCount-1),0),this.bound=this.boundL.clone(),this.displayL(),this.loading=!1)}},{key:"toggle",value:function(e){var a=this;this.isGrid=e,_()||document.querySelectorAll("video.data-render-texture").forEach(function(e){return e.pause()});var t=this.filmPass.uniforms.DistortDelta;this.isGrid?(this.rotate=this.rAngle*Math.PI/180,this.group.visible=!0,this.active=new w.p(3,this.projectCount),this.bound=this.boundG.clone(),document.querySelector("#grid-main-title").style.pointerEvents="auto",document.querySelector("#grid-list-title").style.pointerEvents="none",x.a.to(["#grid-toggle","#down"],.6,{autoAlpha:0,onComplete:function(){a.list.visible=!1,a.tar.x=a.pos.x=0,a.tar.y=a.pos.y=(a.meshGH_+a.meshM_)*a.rows/2-a.projectCount*(a.meshGH_+a.meshM_)-(a.rows%2!=0?(a.meshGH+a.meshM)*window.innerWidth/100/-2:0),_()||a.getTexture().play()}}),x.a.to(["#list-toggle","#drag"],.6,{autoAlpha:1,delay:1.2}),x.a.staggerTo(".grid-list-title",.4,{autoAlpha:0,ease:Power1.easeInOut},.02),x.a.to(this.camera.rotation,.6,{z:this.rotate,ease:Power1.easeInOut,delay:.2}),A()||x.a.to(".data-list-img",.6,{opacity:0,scale:1.2,xPercent:-60,ease:Power1.easeInOut}),this.lists.forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.4,{value:0,ease:Power1.easeOut})}),this.mesh.forEach(function(e){x.a.fromTo(e.material.uniforms.vOpacity,.6,{value:0},{value:1,ease:Power1.easeOut,delay:.8}),x.a.fromTo(e.material.uniforms.maskDelta,.8,{value:.95},{value:1,ease:Power1.easeOut,delay:1}),e.material.uniforms.colors.value={x:.25,y:.25,z:.25}}),x.a.to(this.col[this.active.x].children[this.active.y].material.uniforms.colors.value,.6,{x:1,y:1,z:1,ease:Power1.easeOut,delay:1.2}),x.a.to(".grid-main-title-"+this.getActiveRender(),.8,{autoAlpha:1,ease:Power2.easeOut,delay:1.2}),this.col.forEach(function(e,t){x.a.fromTo(e.position,1.6+Math.round((5*Math.random()+5)*t)/30,{y:(t%a.active.x==0?1:-1)*window.innerHeight*2*Math.round(5*Math.random()+5)/10},{y:0,ease:Power3.easeOut,delay:.4})}),x.a.fromTo(this.list.position,.6,{y:0},{y:window.innerHeight,ease:Power1.easeIn}),x.a.to(t,.4,{value:4,ease:Power1.easeIn,delay:.4}),x.a.to(t,1,{value:0,ease:Power1.easeOut,delay:.6})):(this.rotate=0*Math.PI/180,this.list.visible=!0,this.tar.y=-(this.meshLH_+this.meshM_)*this.activeL,this.lists[this.activeL].material.uniforms.colors.value=new w.q(1,1,1),this.list.position.x=this.pos.x+(this.meshLW_+this.meshM_)*(A()?.2:.5),this.bound=this.boundL.clone(),document.querySelector("#grid-main-title").style.pointerEvents="none",document.querySelector("#grid-list-title").style.pointerEvents="auto",x.a.set(".grid-list-title",{color:"#333333",scale:.75}),x.a.set(".grid-list-title-"+this.lists[this.activeL].userData.id,{color:"#f2f2f2",scale:1}),x.a.to(t,.4,{value:4,ease:Power1.easeIn}),x.a.to(t,1,{value:0,ease:Power1.easeOut,delay:.6}),x.a.to(["#list-toggle","#drag"],.6,{autoAlpha:0,onComplete:function(){a.group.visible=!1}}),x.a.to(["#grid-toggle","#down"],.6,{autoAlpha:1,delay:1.2}),x.a.to(".grid-main-title",.6,{autoAlpha:0,ease:Power1.easeOut,overwrite:"all"}),x.a.staggerTo(".grid-list-title",.6,{autoAlpha:1,ease:Power1.easeInOut,delay:.6},.05),x.a.to(this.camera.rotation,.6,{z:this.rotate,ease:Power1.easeInOut,delay:.2}),this.mesh.forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.4,{value:0,ease:Power1.easeOut})}),this.col.forEach(function(e,t){x.a.fromTo(e.position,.8,{y:0},{y:(t%a.active.x==0?1:-1)*window.innerHeight*2*Math.round(2*Math.random()+8)/10,ease:Power1.easeIn})}),this.lists.forEach(function(e,t){x.a.fromTo(e.material.uniforms.vOpacity,.6,{value:0},{value:1,ease:Power1.easeOut,delay:.6}),x.a.fromTo(e.material.uniforms.maskDelta,.8,{value:.8},{value:1,ease:Power2.easeOut,delay:.6}),t!=a.activeL&&x.a.to(e.material.uniforms.colors.value,.8,{x:.25,y:.25,z:.25,ease:Power2.easeOut,delay:.8})}),x.a.fromTo(this.list.position,1.6,{y:-window.innerHeight},{y:0,ease:Power3.easeOut,delay:.2}),A()||x.a.fromTo(".film-container-"+this.lists[this.activeL].userData.id+" .data-list-img",1,{opacity:0,scale:1.2,xPercent:-60},{opacity:1,scale:1,xPercent:0,ease:Power2.easeOut,delay:.8}))}},{key:"snapG",value:function(e){e||!1||(this.active.y=-Math.round(this.tar.y/(this.meshGH_+this.meshM_))+this.projectCount-(5<this.projectCount?Math.ceil((this.projectCount-5)/2):0),this.active.x=Math.round(this.tar.x/(this.meshGW_+this.meshM_))+3,this.active.y=this.active.y%this.projectCount),this.tar.x=Math.round(this.tar.x/(this.meshGW_+this.meshM_))*(this.meshGW_+this.meshM_),this.tar.y=Math.round(this.tar.y/(this.meshGH_+this.meshM_))*(this.meshGH_+this.meshM_)}},{key:"snapL",value:function(e){e||!1||(this.activeL=-Math.round(this.tar.y/(this.meshLH_+this.meshM_)),this.activeL=Math.min(this.activeL,this.listCount)),this.tar.y=-(this.meshLH_+this.meshM_)*this.activeL}},{key:"hide",value:function(){_()||document.querySelectorAll("video.data-render-texture").forEach(function(e){return e.pause()}),this.isGrid?(this.mesh.forEach(function(e){x.a.to(e.material.uniforms.maskDelta,.6,{value:.95,ease:Power1.easeOut}),x.a.to(e.material.uniforms.colors.value,.6,{x:1,y:1,z:1,ease:Power1.easeOut})}),x.a.to(".grid-main-title-"+this.getActiveRender(),.2,{autoAlpha:0,ease:Power1.easeOut,onComplete:function(){document.querySelectorAll(".grid-main-title span").forEach(function(e){x.a.set(e,{autoAlpha:0,skewX:e.getAttribute("data-delta")/1.6,x:"-"+8*e.getAttribute("data-delta")+"%"})})}})):(this.wheel?this.lists.forEach(function(e){x.a.to(e.material.uniforms.colors.value,.8,{x:.25,y:.25,z:.25,ease:Power2.easeOut})}):this.lists.forEach(function(e){x.a.to(e.material.uniforms.maskDelta,.8,{value:.8,ease:Power1.easeOut}),x.a.to(e.material.uniforms.colors.value,.8,{x:1,y:1,z:1,ease:Power1.easeOut})}),A()||x.a.to(".data-list-img",.4,{opacity:0,scale:1.2,xPercent:-60,ease:Power1.easeIn}),x.a.to(".grid-list-title",.4,{color:"#333333",scale:.75,ease:Power1.easeIn}))}},{key:"displayG",value:function(){this.snapG();var e=3==this.active.x?0:1==this.active.x||4==this.active.x?1:2==this.active.x||5==this.active.x?2:0;_()||this.getTexture().play(),x.a.to(".grid-main-title-"+this.getActiveRender(),.6,{autoAlpha:1,ease:Power1.easeOut}),document.querySelectorAll(".grid-main-title-"+this.getActiveRender()+" span").forEach(function(e){x.a.to(e,e.getAttribute("data-delta")/10,{autoAlpha:1,skewX:0,x:"0%",delay:(1-e.getAttribute("data-delta")/12)/1.5,ease:Power2.easeOut})}),this.mesh.forEach(function(e){x.a.to(e.material.uniforms.maskDelta,.8,{value:1,ease:Power2.easeOut}),x.a.to(e.material.uniforms.colors.value,.8,{x:.25,y:.25,z:.25,ease:Power2.easeOut})});for(var t=e;t<this.cols;t+=3)for(var a=this.active.y;a<this.rows;a+=this.projectCount)this.col[t].children[a].material.uniforms.colors.value=new w.q(1,1,1)}},{key:"displayL",value:function(e){var a=this,t=e||!1;if(this.pos.y<this.bound.z&&this.listCount<this.totalCount&&!this.loading){this.loading=!0;var n=this.listCount+this.loadMore>this.totalCount?this.totalCount-this.listCount:this.loadMore;this.load(this.listCount,this.listCount+n)}else{this.tar.y=this.pos.y>this.bound.x?this.bound.x:this.pos.y<this.bound.z?this.tar.y=this.bound.z:this.tar.y,this.snapL();var i=this.lists[this.activeL].userData.id;x.a.to(".grid-list-title-"+i,.6,{color:"#f2f2f2",scale:1,ease:Power1.easeOut}),A()||x.a.to(".film-container-"+i+" .data-list-img",1.2,{opacity:1,scale:1,xPercent:0,ease:Power2.easeOut}),t?x.a.to(this.lists[this.activeL].material.uniforms.colors.value,.8,{x:1,y:1,z:1,ease:Power1.easeOut}):this.lists.forEach(function(e,t){t!=a.activeL&&x.a.to(e.material.uniforms.colors.value,.8,{x:.25,y:.25,z:.25,ease:Power1.easeOut}),x.a.to(e.material.uniforms.maskDelta,.8,{value:1,ease:Power2.easeOut})})}}},{key:"setScroll",value:function(e){this.wheel=!0,20<Math.abs(e)&&(this.hide(),this.tar.y-=e)}},{key:"enter",value:function(e){var a=this,t=this.filmPass.uniforms.DistortDelta;if(this.rotate=this.rAngle*Math.PI/180,x.a.fromTo(this.camera.rotation,.6,{z:0},{z:this.rotate,ease:Power1.easeInOut}),x.a.to(["#drag","#grid-list-toggle"],.3,{autoAlpha:1}),this.group.visible=!0,this.bound=this.boundG.clone(),this.isGrid=!0,document.querySelectorAll(".grid-main-title span").forEach(function(e){return x.a.set(e,{autoAlpha:0,skewX:e.getAttribute("data-delta")/1.6,x:"-"+8*e.getAttribute("data-delta")+"%"})}),e)this.active=this.active_=new w.p(3,this.projectCount),this.tar.x=this.pos.x=0,this.tar.y=this.pos.y=(this.meshGH_+this.meshM_)*this.rows/2-this.projectCount*(this.meshGH_+this.meshM_)-(this.rows%2!=0?(this.meshGH+this.meshM)*window.innerWidth/100/-2:0),x.a.set(".grid-main-title-"+this.totalCount+" a span",{autoAlpha:1,skewX:0,x:"0%"}),x.a.set("#grid-main-title",{autoAlpha:1,scale:1}),x.a.set("#current-title",{autoAlpha:0,scale:1}),x.a.fromTo(".grid-main-title-"+this.totalCount,.8,{autoAlpha:0},{autoAlpha:1,ease:Power2.easeOut,delay:1}),document.querySelector("#grid-main-title").classList.remove("active"),this.mesh.forEach(function(e){e.visible=!0,e.scale.set(a.meshGW_,a.meshGH_,1),x.a.fromTo(e.material.uniforms.vOpacity,.6,{value:0},{value:1,ease:Power1.easeOut,delay:.2}),x.a.fromTo(e.material.uniforms.maskDelta,.8,{value:.95},{value:1,ease:Power1.easeOut,delay:.2}),e.material.uniforms.colors.value={x:.25,y:.25,z:.25}}),x.a.to(this.col[this.active.x].children[this.active.y].material.uniforms.colors.value,.6,{x:1,y:1,z:1,ease:Power1.easeOut,delay:.2}),this.col.forEach(function(e,t){x.a.fromTo(e.position,1.6+Math.round((5*Math.random()+5)*t)/30,{y:(t%a.active.x==0?1:-1)*window.innerHeight*2*Math.round(5*Math.random()+5)/10},{y:0,ease:Power3.easeOut})}),x.a.fromTo(t,2.4,{value:3},{value:0,ease:Power1.easeOut});else{x.a.to("#current-title",.6,{scale:1,ease:Power2.easeInOut,delay:.2,onComplete:function(){x.a.set("#grid-main-title",{autoAlpha:1}),x.a.set([".grid-main-title","#current-title"],{autoAlpha:0}),x.a.set(".grid-main-title-"+a.getActiveRender(),{autoAlpha:1}),x.a.set(".grid-main-title-"+a.getActiveRender()+" span",{autoAlpha:1,skewX:0,x:"0%"}),document.querySelector("#grid-main-title").classList.remove("active")}}),x.a.to(t,.4,{value:4,ease:Power1.easeIn}),x.a.to(t,.4,{value:0,ease:Power1.easeOut,delay:.4}),this.col.forEach(function(e){return e.position.y=0});for(var n=0;n<this.cols;n++)for(var i=0;i<this.rows;i++)this.col[n].children[i].visible=!0,n==this.active_.x&&i==this.active_.y?(this.col[n].children[i].material.uniforms.vOpacity.value=1,x.a.fromTo(this.col[n].children[i].scale,.8,{x:window.innerWidth*(window.innerWidth*(window.innerWidth<=500)?.85:.7),y:window.innerWidth*(window.innerWidth*(window.innerWidth<=500)?.85:.7)*(this.meshGH/this.meshGW)},{x:this.meshGW_,y:this.meshGH_,ease:Power2.easeInOut}),this.col[n].children[i].material.uniforms.colors.value={x:1,y:1,z:1}):(x.a.fromTo(this.col[n].children[i].material.uniforms.vOpacity,.4,{value:0},{value:1,ease:Power1.easeInOut,delay:.4}),this.col[n].children[i].material.uniforms.colors.value={x:.25,y:.25,z:.25},this.col[n].children[i].scale.set(this.meshGW_,this.meshGH_,1))}_()||(document.querySelectorAll("video.data-render-texture").forEach(function(e){return e.pause()}),this.getTexture().play())}},{key:"exit",value:function(){var n=this,e=this.filmPass.uniforms.DistortDelta;if(x.a.to(["#drag","#grid-list-toggle","#grid-main-title"],.3,{autoAlpha:0}),x.a.to("#grid-main-title",.6,{autoAlpha:0,ease:Power2.easeInOut}),this.uniqueExit){document.querySelector("#grid-main-title").classList.add("active"),this.rotate=0*Math.PI/180,x.a.set("#grid-main-title",{autoAlpha:0}),x.a.set("#current-title",{autoAlpha:1}),x.a.fromTo("#current-title",.6,{scale:1},{scale:1.3,ease:Power2.easeInOut,delay:.2}),document.querySelector("#current-title").innerHTML=document.querySelector(".grid-main-title-"+this.getActiveRender()+" a").innerHTML,x.a.to("#current-title span",.3,{autoAlpha:1,skewX:0,x:"0%"}),x.a.to(".grid-main-title-"+this.getActiveRender()+" span",.3,{autoAlpha:1,skewX:0,x:"0%"}),x.a.to(this.camera.rotation,.6,{z:this.rotate,ease:Power1.easeInOut}),this.active_.y=-Math.round(this.tar.y/(this.meshGH_+this.meshM_))+this.projectCount-(5<this.projectCount?Math.ceil((this.projectCount-5)/2):0),this.active_.x=this.active.x;for(var t=function(t){for(var e=function(e){t==n.active_.x&&e==n.active_.y?x.a.to(n.col[t].children[e].scale,.8,{x:window.innerWidth*(window.innerWidth*(window.innerWidth<=500)?.85:.7),y:window.innerWidth*(window.innerWidth*(window.innerWidth<=500)?.85:.7)*(n.meshGH/n.meshGW),ease:Power2.easeInOut}):x.a.to(n.col[t].children[e].material.uniforms.vOpacity,.4,{value:0,ease:Power1.easeOut,onComplete:function(){n.col[t].children[e].visible=!1}})},a=0;a<n.rows;a++)e(a)},a=0;a<this.cols;a++)t(a);x.a.to(e,.4,{value:-20,ease:Power2.easeOut}),x.a.to(e,.2,{value:1,delay:.4}),x.a.to(e,.3,{value:0,ease:Power1.easeInOut,delay:.6})}else this.isGrid?(this.list.visible=!1,x.a.to(e,.6,{value:4,ease:Power1.easeOut}),x.a.to(e,.4,{value:0,ease:Power1.easeOut,delay:.6}),x.a.to(this.camera.rotation,.6,{z:this.rotate,ease:Power1.easeInOut,delay:.2}),this.mesh.forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.4,{value:0,ease:Power1.easeOut,onComplete:function(){e.visible=!1}})}),this.col.forEach(function(e,t){x.a.fromTo(e.position,.8,{y:0},{y:(t%n.active.x==0?1:-1)*window.innerHeight*2*Math.round(2*Math.random()+8)/10,ease:Power1.easeIn})})):(x.a.to(["#grid-list-toggle","#down"],.3,{autoAlpha:0,onComplete:function(){x.a.set("#list-toggle",{autoAlpha:1}),x.a.set("#grid-toggle",{autoAlpha:0})}}),document.querySelector("#grid-main-title").style.pointerEvents="auto",document.querySelector("#grid-list-title").style.pointerEvents="none",A()||x.a.to(".data-list-img",.6,{opacity:0,scale:1.2,xPercent:-60,ease:Power1.easeInOut}),x.a.staggerTo(".grid-list-title",.4,{autoAlpha:0,ease:Power1.easeInOut},.02),this.lists.forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.4,{value:0,ease:Power1.easeOut})}),x.a.fromTo(this.list.position,.6,{y:0},{y:window.innerHeight,ease:Power1.easeIn,onComplete:function(){n.list.visible=!1}}));this.uniqueExit=!1}},{key:"resize",value:function(){var a=this;if(this.done){this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.camera.left=window.innerWidth/-2,this.camera.right=window.innerWidth/2,this.camera.top=window.innerHeight/2,this.camera.bottom=window.innerHeight/-2,this.camera.updateProjectionMatrix(),this.fxaaPass.material.uniforms.resolution.value=new w.p(1/window.innerWidth,1/window.innerHeight),this.meshGW=42*(window.innerWidth<=768?1.6:1),this.meshGH=24*(window.innerWidth<=768?1.6:1),this.meshGW_=this.meshGW*window.innerWidth/100,this.meshGH_=this.meshGH*window.innerWidth/100,this.meshLW=this.meshGW/1.7,this.meshLH=this.meshGH/1.7,this.meshLW_=this.meshLW*window.innerWidth/100,this.meshLH_=this.meshLH*window.innerWidth/100,this.meshM_=this.meshM*window.innerWidth/100,this.offset=new w.q((this.meshGW+this.meshM)*window.innerWidth/100*.5,this.rows%2!=0?(this.meshGH+this.meshM)*window.innerWidth/100/2:0,0);for(var e=0;e<this.cols;e++)for(var t=0;t<this.rows;t++)this.mesh[e*this.rows+t].scale.set(this.meshGW_,this.meshGH_,1),this.mesh[e*this.rows+t].position.set((this.meshGW_+this.meshM_)*e-(this.meshGW_+this.meshM_)*this.cols/2,-(this.meshGH_+this.meshM_)*t+(this.meshGH_+this.meshM_)*this.rows/2,-1).add(this.offset);this.boundG=new w.r((this.meshGH_+this.meshM_)*this.rows/2-2*(this.meshGH_+this.meshM_),(this.meshGW_+this.meshM_)*this.cols/2-window.innerWidth*(window.innerWidth<=768?1.6:1),-(this.meshGH_+this.meshM_)*this.rows/2+3*(this.meshGH_+this.meshM_),-(this.meshGW_+this.meshM_)*this.cols/2+window.innerWidth*(window.innerWidth<=768?.73:.75)*(window.innerWidth<=768?1.6:1)),this.boundL=new w.r(0,0,-(this.meshLH_+this.meshM_)*(this.listCount-1),0),this.bound=this.isGrid?this.boundG.clone():this.boundL.clone(),this.list.position.x=this.pos.x+.5*(this.meshLW_+this.meshM_),this.lists.forEach(function(e,t){e.scale.set(a.meshLW_,a.meshLH_,1),e.position.set((window.innerWidth/2-a.meshLW_)/2,-(a.meshLH_+a.meshM_)*t,-1)}),x.a.set(".grid-list-title",{y:-this.meshLH_/2,height:this.meshLH_,marginBottom:this.meshM_}),this.isGrid?this.snapG(!0):this.snapL(!0)}}}])&&G(e.prototype,t),n&&G(e,n),a}();function q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blink=new TimelineMax({paused:!0,repeat:-1,repeatDelay:.8,delay:.8,yoyo:!0}),this.blink.to("#menu-button #redcircle",.2,{autoAlpha:0}).to("#menu-button #redcircle",.2,{autoAlpha:1}),x.a.set("#menu",{y:"-100%",force3D:!0}),this.tl=new TimelineMax({paused:!0}),this.tl.to("#menu",.6,{y:"0%",ease:Power2.easeOut}).to("#open-menu",.3,{autoAlpha:0},"-=0.3").to("#close-menu",.3,{autoAlpha:1},"-=0.15").to("#menu .links",.6,{autoAlpha:1}),document.querySelectorAll("#menu ul li a").forEach(function(i){var e=i.innerHTML;i.innerHTML="",e.split("").forEach(function(e,t){var a=document.createElement("span");a.style.display="inline-block";var n=Math.round(5*Math.random())+5;a.setAttribute("data-delta",n),x.a.set(a,{x:"-"+4*n+"%",skewX:n/3,autoAlpha:0,force3D:!0,transformOrigin:"0% 100%"}),a.innerHTML=e,i.appendChild(a),o.tl.add(x.a.to(a,.3,{x:"0%",skewX:0,autoAlpha:1,ease:Power1.easeOut}),0==t?"-=0.2":"-="+(.2+.4-n/40))})}),this.open=!1}var t,a,n;return t=e,(a=[{key:"resize",value:function(){x.a.set("#menu",{y:this.open?"0%":"-100%"})}},{key:"openMenu",value:function(){this.open=!0,this.tl.play(),this.blink.play()}},{key:"closeMenu",value:function(){this.open=!1,this.tl.reverse(),this.blink.pause(0)}}])&&q(t.prototype,a),n&&q(t,n),e}();function B(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=e,this.delta=this.dom.getAttribute("data-parallax")}var e,a,n;return e=t,(a=[{key:"update",value:function(){x.a.set(this.dom,{yPercent:-1*(this.dom.getBoundingClientRect().top-window.innerHeight)/window.innerHeight*this.delta})}}])&&B(e.prototype,a),n&&B(e,n),t}();function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=e,this.delta=this.dom.getAttribute("data-float"),this.pos={x:0,y:0},this.tar={x:0,y:0}}var e,a,n;return e=t,(a=[{key:"update",value:function(e){this.tar.x=-(e.x-window.innerWidth/2),this.tar.y=-(e.y-window.innerHeight/2),this.pos.x+=(this.tar.x-this.pos.x)/this.delta,this.pos.y+=(this.tar.y-this.pos.y)/this.delta,TweenLite.set(this.dom,{y:this.pos.y/this.delta,x:this.pos.x/this.delta})}}])&&V(e.prototype,a),n&&V(e,n),t}();function $(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var K=function(){function a(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.dom=e,this.text=this.dom.innerText,this.dom.innerHTML="",this.words=this.text.split(" "),this.split=this.words.map(this.split),this.split.forEach(function(e){return t.dom.appendChild(e)})}var e,t,n;return e=a,(t=[{key:"split",value:function(e){var t=document.createElement("span");return t.innerText=e+" ",t.classList.add("split-word"),t.setAttribute("data-word",t.innerText),t}},{key:"update",value:function(e){var a=Math.abs(Math.round(e*this.words.length));a=a<2?0:a>this.words.length-2?this.words.length:a,this.split.forEach(function(e,t){t<a?1!=e.style.opacity&&(e.style.opacity=1):.001!=e.style.opacity&&(e.style.opacity=.001)})}}])&&$(e.prototype,t),n&&$(e,n),a}();function Z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.blink=new TimelineMax({paused:!0,repeat:-1,repeatDelay:.8,delay:.8,yoyo:!0}),this.blink.to("#trailer-overlay .redcircle",.2,{autoAlpha:0}),this.video=e,this.timer,this.playback=0,this.playtime=this.video.duration,this.playing,this.aspect=this.video.videoWidth/this.video.videoHeight,this.resize()}var e,a,n;return e=t,(a=[{key:"resize",value:function(){768<window.innerWidth&&(window.innerWidth/window.innerHeight>this.aspect?(this.video.style.width="100%",this.video.style.height="auto"):(this.video.style.height="100%",this.video.style.width="auto"))}},{key:"open",value:function(){var e=this;this.video.style.display="block",x.a.to("#trailer-overlay",.6,{autoAlpha:1}),this.play(),this.playing=requestAnimationFrame(function(){return e.rAF()})}},{key:"close",value:function(){var e=this;this.pause(),x.a.to("#trailer-overlay",.6,{autoAlpha:0,onComplete:function(){e.video.style.display="none"}}),cancelAnimationFrame(this.playing)}},{key:"play",value:function(){this.blink.play(),this.video.play()}},{key:"pause",value:function(){this.blink.pause(0),this.video.pause()}},{key:"seek",value:function(){}},{key:"rAF",value:function(){var e=this;this.playback=this.video.currentTime/this.playtime,x.a.set("#indicator",{x:window.innerWidth*this.playback});var t=Math.round(this.video.currentTime);document.querySelector("#record .timer").innerText="0"+Math.floor(t/60)+":"+(10<=t%60?t%60:"0"+t%60),this.playing=requestAnimationFrame(function(){return e.rAF()})}}])&&Z(e.prototype,a),n&&Z(e,n),t}();function te(e,t,a,n,i){var o=n||!1,r={passive:i||!1},s=e,l=t,c=a,u="ontouchstart"in document;s==document||s==window?s.addEventListener(l,c,r):document.querySelectorAll(s).forEach(function(e){e.addEventListener(l,c,r),o&&e.addEventListener(u?"touchstart":"mousedown",function(e){e.stopPropagation()},r)})}function ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ne=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this.scrollY=0,this.scrollTargetY=0,this.velocity=0,this.DOMElement=e,this.scrollElement=this.DOMElement.querySelector("#scroll"),this.parallax=[],this.float=[],this.scrollfade=[],this.reveal=this.DOMElement.querySelector(".text-reveal")&&768<window.innerWidth?new K(this.DOMElement.querySelector(".text-reveal")):null,this.videos=[],this.scrollAble=!1,this.moving=!1,this.canvasDOM=[],this.canvasOBJ=[],this.canvasTXR=[],this.webGL=!1,this.geometry=new w.j(1,1,1,1),this.isTouched=!1,this.scrollElement&&x.a.set(this.scrollElement,{force3D:!0})}var e,a,n;return e=t,(a=[{key:"resize",value:function(){var a=this;this.webGL&&(this.camera.left=window.innerWidth/-2,this.camera.right=window.innerWidth/2,this.camera.top=window.innerHeight/2,this.camera.bottom=window.innerHeight/-2,this.camera.updateProjectionMatrix(),this.canvasDOM.forEach(function(e,t){return a.canvasOBJ[t].scale.set(e.clientWidth,e.clientHeight,1)}))}},{key:"enter",value:function(){var n=this;return new Promise(function(e){_()||(te(".mouse-hover","mouseenter",b.hoverin),te(".mouse-hover","mouseleave",b.hoverout),te(".button-red-dot","mouseenter",b.hoverin),te(".button-red-dot","mouseleave",b.hoverout)),500<window.innerWidth&&(n.DOMElement.querySelectorAll(".parallax-obj").forEach(function(e){x.a.set(e,{force3D:!0}),n.parallax.push(new z(e))}),n.DOMElement.querySelectorAll(".float-obj").forEach(function(e){x.a.set(e,{rotation:.01,force3D:!0}),n.float.push(new J(e))})),n.DOMElement.querySelectorAll(".scroll-fade").forEach(function(e){x.a.set(e,{opacity:.01,yPercent:768<window.innerWidth?50:10,rotation:.01,force3D:!0}),n.scrollfade.push(e)}),n.DOMElement.querySelectorAll("#trailer-overlay .trailer").forEach(function(e){n.videos.push(new ee(e))}),n.DOMElement.querySelectorAll(".canvasOBJ")?(n.manager=new w.e(function(){n.camera=new w.h(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e3),n.camera.position.z=500,n.scene=new w.l,n.scene.add(n.camera),n.canvasOBJ.forEach(function(e){return n.scene.add(e)}),n.webGL=n.scrollAble=!0,n.setup(),e()}),500<window.innerWidth?n.DOMElement.querySelectorAll(".canvasOBJ").forEach(function(t,a){n.canvasDOM.push(t),t.style.visibility=t.classList.contains("mouse-hover")?"visible":"hidden",t.style.opacity=0,n.canvasTXR[a]=new w.n(n.manager).load(t.getAttribute("data-url"),function(e){e.minFilter=w.d,n.canvasOBJ[a]=new w.f(n.geometry,n.createMat(e,0,0,1.2,0,!0)),n.canvasOBJ[a].scale.set(t.clientWidth,t.clientHeight,1),n.canvasOBJ[a].position.z=t.getAttribute("data-zindex")||1})}):(n.camera=new w.h(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e3),n.camera.position.z=500,n.scene=new w.l,n.scene.add(n.camera),n.webGL=n.scrollAble=!0,n.setup(),e())):(n.scrollAble=!0,e())})}},{key:"leave",value:function(){x.a.to(this.DOMElement,1,{autoAlpha:0,ease:Power1.easeIn}),this.canvasOBJ.forEach(function(e){x.a.to(e.material.uniforms.vOpacity,.8,{value:0,ease:Power1.easeIn}),x.a.to(e.material.uniforms.scale,.8,{value:1.5,ease:Power1.easeIn})})}},{key:"exit",value:function(){var t=this;this.scene&&(this.canvasTXR.forEach(function(e){return e.dispose()}),this.geometry.dispose(),this.canvasOBJ.forEach(function(e){e.geometry.dispose(),e.material.dispose(),t.scene.remove(e)}),this.scene.dispose(),this.scene=null,this.camera=null,this.canvasTXR=null,this.canvasOBJ=null,this.canvasDOM=null),x.a.to("#scro",.3,{autoAlpha:0}),x.a.to("#instruction svg",.3,{autoAlpha:0})}},{key:"setup",value:function(){}},{key:"scroll",value:function(e){this.scrollAble&&(this.scrollTargetY-=e,this.scrollTargetY=Math.max(Math.min(this.scrollTargetY,0),-(this.scrollElement.scrollHeight-window.innerHeight)))}},{key:"mouse",value:function(t){this.float.forEach(function(e){e.update(t)})}},{key:"createMat",value:function(e,t,a,n,i,o){return new w.m({uniforms:{tDiffuse:{value:e},translate:{type:"f",value:t},vOpacity:{type:"f",value:a},scale:{type:"f",value:n},delta:{type:"f",value:i}},side:w.c,vertexShader:"\n    varying vec2 vUv;\n    void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:o?"\n    uniform sampler2D tDiffuse;\n    uniform float vOpacity;\n    uniform float translate;\n    uniform float scale;\n    uniform float delta;\n\n    varying vec2 vUv;\n\n\tfloat rand(vec2 co){\n        return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 9527.);\n\t}\n\n    void main() {\n        vec2 p = vUv;\n\n\n        p = p * (4.0 / scale / delta ) - 2.0 / scale / delta;\n        p = 0.5 * (p * 0.5 + 1.0);\n\n        float ax = ((p.x - .5) * (p.x - .5)) / (0.3*0.3) + ((p.y - .5) * (p.y - .5)) / 0.3 ;\n        float dx = (-delta/16.)*ax + (delta*2./(16.*16.))*ax*ax;\n        float f =  (ax + dx );\n        if (ax < 16.) f = ax;\n\n        p = vec2(.5) + (p-vec2(.5))*f/ax;\n\n        vec4 cr = texture2D(tDiffuse, vec2(p.x,p.y + translate)  ) ;\n        vec4 cg = texture2D(tDiffuse, vec2(p.x,p.y - translate)  ) ;\n        vec4 cb = texture2D(tDiffuse, p );\n        \n        gl_FragColor = vec4( cr.r, cg.g, cb.b, vOpacity);\n    }\n    ":"\n    uniform sampler2D tDiffuse;\n    uniform float vOpacity;\n    uniform float translate;\n    uniform float scale;\n    uniform float delta;\n\n    varying vec2 vUv;\n\n\tfloat rand(vec2 co){\n        return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 9527.);\n\t}\n\n    void main() {\n        vec2 p = vUv;\n\n\n        p = p * (4.0 / scale / delta ) - 2.0 / scale / delta;\n        p = 0.5 * (p * 0.5 + 1.0);\n\n        float ax = ((p.x - .5) * (p.x - .5)) / (0.3*0.3) + ((p.y - .5) * (p.y - .5)) / 0.3 ;\n        float dx = (-delta/16.)*ax + (delta*2./(16.*16.))*ax*ax;\n        float f =  (ax + dx );\n        if (ax < 16.) f = ax;\n\n        p = vec2(.5) + (p-vec2(.5))*f/ax;\n\n        vec4 c = texture2D(tDiffuse, vec2(p.x + translate,p.y ) );\n        \n        gl_FragColor = vec4( c.rgb, vOpacity);\n    }\n    ",transparent:!0})}},{key:"update",value:function(){var a=this;window,500<innerWidth&&this.canvasOBJ.forEach(function(e,t){e.position.y=-a.canvasDOM[t].getBoundingClientRect().top-(a.canvasDOM[t].clientHeight-window.innerHeight)/2,e.position.x=a.canvasDOM[t].getBoundingClientRect().left+(a.canvasDOM[t].clientWidth-window.innerWidth)/2,e.material.uniforms.translate.value=12e-6*(a.scrollTargetY-a.scrollY),a.canvasDOM[t].getBoundingClientRect().top-window.innerHeight<0&&a.canvasDOM[t].getBoundingClientRect().top>-1*a.canvasDOM[t].clientHeight&&(e.material.uniforms.delta.value=1.2+(a.canvasDOM[t].getBoundingClientRect().top-window.innerHeight)/window.innerHeight/(window.innerWidth/window.innerHeight)*a.canvasDOM[t].clientWidth/4e3),a.canvasDOM[t].getBoundingClientRect().top-window.innerHeight<0&&!a.canvasDOM[t].classList.contains("visible")&&(x.a.to(e.material.uniforms.vOpacity,.8,{value:1,ease:Power1.easeOut}),x.a.to(e.material.uniforms.scale,1.6,{value:1.02,ease:Power2.easeOut}),a.canvasDOM[t].classList.add("visible"))})}},{key:"render_",value:function(e){e.render(this.scene,this.camera)}},{key:"rAF",value:function(){!this.moving&&this.DOMElement&&(this.scrollAble&&(this.scrollY=Math.abs(this.scrollTargetY-this.scrollY)<(_()?.075:.05)?this.scrollTargetY:this.scrollY+(this.scrollTargetY-this.scrollY)*(_()?.075:.05)),this.scrollElement&&x.a.set(this.scrollElement,{y:this.scrollY}),this.webGL&&this.update(),this.parallax.forEach(function(e){e.dom.getBoundingClientRect().top-window.innerHeight<0&&e.dom.getBoundingClientRect().top>-1*e.dom.clientHeight&&e.update()}),this.scrollfade.forEach(function(e){e.getBoundingClientRect().top-window.innerHeight<0&&!e.classList.contains("visible")&&(x.a.to(e,1.2,{opacity:1,yPercent:0,ease:Power2.easeOut,delay:.2}),e.classList.add("visible"))}),this.reveal&&this.reveal.dom.getBoundingClientRect().top-.9*window.innerHeight<0&&this.reveal.dom.getBoundingClientRect().top>.9*window.innerHeight-this.reveal.dom.offsetHeight&&this.reveal.update((this.reveal.dom.getBoundingClientRect().top-.9*window.innerHeight)/this.reveal.dom.offsetHeight))}}])&&ae(e.prototype,a),n&&ae(e,n),t}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function se(e,t,a){return(se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=le(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=re(this,le(n).call(this,e))).cover={dom:t.DOMElement.querySelector("#case_cover .cover_image")},t.footer={dom:t.DOMElement.querySelector(".case_people_img"),mesh:[]},t.ready=!1,t.footerTxtrList=["./src/media/about/footer-people.jpg","./src/media/about/footer-blur-l.jpg","./src/media/about/footer-blur-r.jpg"],t.flyin=t.DOMElement.querySelector(".case_award"),t.currentVid=0,t}var e,t,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(n,ne),e=n,(t=[{key:"enter",value:function(){var e=this;_()||(te(".case_people .left","mouseenter",function(){x.a.to(e.footer.mesh[2].material.uniforms.vOpacity,1,{value:1}),e.footer.mesh.forEach(function(e){x.a.to(e.material.uniforms.scale,1,{value:1.1}),x.a.to(e.material.uniforms.translate,1,{value:-.05})})}),te(".case_people .left","mouseleave",function(){x.a.to(e.footer.mesh[2].material.uniforms.vOpacity,1,{value:0}),e.footer.mesh.forEach(function(e){x.a.to(e.material.uniforms.scale,1,{value:1}),x.a.to(e.material.uniforms.translate,1,{value:0})})}),te(".case_people .right","mouseenter",function(){x.a.to(e.footer.mesh[1].material.uniforms.vOpacity,1,{value:1}),e.footer.mesh.forEach(function(e){x.a.to(e.material.uniforms.scale,1,{value:1.1}),x.a.to(e.material.uniforms.translate,1,{value:.05})})}),te(".case_people .right","mouseleave",function(){x.a.to(e.footer.mesh[1].material.uniforms.vOpacity,1,{value:0}),e.footer.mesh.forEach(function(e){x.a.to(e.material.uniforms.scale,1,{value:1}),x.a.to(e.material.uniforms.translate,1,{value:0})})})),window.innerWidth<=500&&x.a.set(".case_award .canvasOBJ",{autoAlpha:0}),se(le(n.prototype),"enter",this).call(this)}},{key:"setup",value:function(){var e,a=this;se(le(n.prototype),"setup",this).call(this),te("#close_trailer","click",function(){return a.videos[a.currentVid].close()}),this.DOMElement.querySelectorAll(".case_award img").forEach(function(e){e.addEventListener("click",function(){a.currentVid=e.getAttribute("data-video"),a.videos[a.currentVid].open()})}),te("#record","click",function(){a.videos[a.currentVid].video.paused?a.videos[a.currentVid].play():a.videos[a.currentVid].pause()}),this.cover.dom.src=this.cover.dom.getAttribute("data-src"),this.cover.dom.addEventListener("canplaythrough",e=function(){a.cover.dom.removeEventListener("canplaythrough",e),a.cover.mesh=new w.f(a.geometry,a.createMat(new w.s(a.cover.dom),0,0,1,1,!1)),a.cover.mesh.scale.set(a.cover.dom.clientWidth,a.cover.dom.clientHeight,1),a.scene.add(a.cover.mesh),x.a.to("#about-title",.6,{autoAlpha:1,scale:1.3,ease:Power2.easeInOut}),x.a.to(a.cover.mesh.material.uniforms.vOpacity,1,{value:1,ease:Power1.easeOut,onComplete:function(){a.ready=!0}})}),this.footerTxtrList.forEach(function(e,t){(new w.n).load(e,function(e){e.minFilter=w.d,a.footer.mesh[t]=new w.f(a.geometry,a.createMat(e,0,t<1?1:0,1,1,!1)),a.footer.mesh[t].scale.set(a.footer.dom.clientWidth,a.footer.dom.clientHeight,1),a.footer.mesh[t].position.y=-a.footer.dom.getBoundingClientRect().top-(a.footer.dom.clientHeight-window.innerHeight)/2,a.footer.mesh[t].position.x=a.footer.dom.getBoundingClientRect().left+(a.footer.dom.clientWidth-window.innerWidth)/2,a.footer.mesh[t].position.z=t,a.scene.add(a.footer.mesh[t])})})}},{key:"leave",value:function(){var e=this;se(le(n.prototype),"leave",this).call(this),this.ready=!1,x.a.staggerTo(".canvasOBJ",.8,{xPercent:-100,autoAlpha:0,ease:Power1.easeIn}),this.footer.mesh.forEach(function(e){return x.a.to(e.material.uniforms.vOpacity,.8,{value:0,ease:Power1.easeIn})}),x.a.to(this.cover.mesh.material.uniforms.vOpacity,.8,{value:0,ease:Power1.easeIn,onComplete:function(){e.cover.mesh.visible=!1}}),x.a.to("#scro",.3,{autoAlpha:0})}},{key:"exit",value:function(){se(le(n.prototype),"exit",this).call(this)}},{key:"resize",value:function(){var t=this;se(le(n.prototype),"resize",this).call(this),this.webGL&&(this.cover.mesh.scale.set(this.cover.dom.clientWidth,this.cover.dom.clientHeight,1),this.footer.mesh.forEach(function(e){return e.scale.set(t.footer.dom.clientWidth,t.footer.dom.clientHeight,1)}))}},{key:"update",value:function(){var t=this;this.cover.mesh&&this.ready&&(this.scrollY>1.2*-window.innerHeight&&(x.a.set("#about-title",{autoAlpha:1-this.scrollY/-window.innerHeight,y:this.scrollY/1.5}),this.cover.mesh.material.uniforms.translate.value=5e-6*(this.scrollTargetY-this.scrollY),this.cover.mesh.material.uniforms.delta.value=1+this.scrollY/-window.innerHeight/2,this.cover.mesh.material.uniforms.vOpacity.value=1-this.scrollY/-window.innerHeight*1.2,this.cover.mesh.scale.set(this.cover.dom.clientWidth*(1+this.scrollY/-window.innerHeight),this.cover.dom.clientHeight*(1+this.scrollY/-window.innerHeight),1)),this.footer.mesh.forEach(function(e){e.position.y=-t.footer.dom.getBoundingClientRect().top-(t.footer.dom.clientHeight-window.innerHeight)/2,e.position.x=t.footer.dom.getBoundingClientRect().left+(t.footer.dom.clientWidth-window.innerWidth)/2}),this.scrollY<-100?1==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0})):0==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:1}),x.a.to("#scro",.3,{autoAlpha:1}))),se(le(n.prototype),"update",this).call(this)}},{key:"rAF",value:function(){this.moving||(se(le(n.prototype),"rAF",this).call(this),this.flyin.getBoundingClientRect().top-window.innerHeight<0&&!this.flyin.classList.contains("visible")&&(500<window.innerWidth?x.a.staggerFromTo(".case_award .canvasOBJ",1.2,{xPercent:50},{xPercent:0,ease:Power2.easeOut,delay:.4},.1):x.a.staggerFromTo(".case_award .canvasOBJ",1.2,{autoAlpha:0,xPercent:50},{autoAlpha:1,xPercent:0,ease:Power2.easeOut,delay:.4},.1),this.canvasOBJ.forEach(function(e,t){return x.a.to(e.material.uniforms.vOpacity,1.2,{value:1,ease:Power2.easeOut,delay:.4+.1*t})}),this.flyin.classList.add("visible")))}}])&&oe(e.prototype,t),a&&oe(e,a),n}(),he=a(42),de=a(136),fe=a.n(de);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t,a){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ge(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(){function o(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,n=ge(o).call(this,e),t=!n||"object"!==pe(n)&&"function"!=typeof n?ve(a):n;var i=ve(t);return t.active=2,t.open=!1,t.readyfile=!0,500<window.innerWidth?document.querySelector("body").addEventListener("click",function(e){e.target&&"contact_send"==e.target.id&&i.send_form(i)}):document.querySelector("body").addEventListener("touchstart",function(e){e.target&&"contact_send"==e.target.id&&i.send_form(i)}),500<window.innerWidth?(x.a.set(".contact_titles",{y:"-50%",x:"-50%"}),te(".action","click",function(){t.open||(t.open=!0,t.DOMElement.querySelector(".contact_forms").style.display="block",x.a.to(".contact_titles",.6,{y:-(window.innerHeight-3*document.querySelector(".contact_titles").offsetHeight)/2,ease:Power1.easeInOut}),x.a.to([".action",".contact_titles .small_btn"],.6,{autoAlpha:0,ease:Power1.easeInOut}),x.a.to(".contact_forms .row.name",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut,delay:.4}),x.a.to(["#contact_send","#contact_back",".contact_mask"],.6,{autoAlpha:1,delay:.4}),t.canvasOBJ.forEach(function(e){x.a.to(e.material.uniforms.scale,.6,{value:1.5,ease:Power1.easeInOut}),x.a.to(e.material.uniforms.vOpacity,.6,{value:0,ease:Power1.easeInOut})}))}),te("#contact_back","click",function(){i.goback()})):x.a.set(".contact_titles",{x:"-50%"}),te(".close-overlay","click",function(){x.a.to("#contact_overlay",.6,{autoAlpha:0,ease:Power1.easeInOut}),i.goback()}),500<window.innerWidth&&(te(".row.name","keyup",Object(he.debounce)(function(){x.a.to(".contact_forms .row.email",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut})},500)),te(".row.email","keyup",Object(he.debounce)(function(){x.a.to(".contact_forms .row.phone",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut})},500)),te(".row.phone","keyup",Object(he.debounce)(function(){x.a.to(".contact_forms .row.message",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut})},500))),_()?t.DOMElement.querySelector(".row.files").style.display="none":te(".row.message","keyup",Object(he.debounce)(function(){x.a.to(".contact_forms .row.files",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut})},500)),te(".contact_titles .text-title-3","click",function(){i.active!=this.getAttribute("data-click")&&(i.active=this.getAttribute("data-click"),x.a.to(".contact_titles .wrapper",.8,{x:-1*(i.active-2)*document.querySelector(".contact_title").offsetWidth,ease:Power2.easeInOut}),x.a.to(".covers .wrapper",.8,{x:-1*(i.active-2)*document.querySelector(".covers").offsetWidth/3,y:-1*(i.active-2)*document.querySelector(".contact_cover_image").clientHeight/2,ease:Power2.easeInOut}),document.querySelector(".contact_title.active").classList.remove("active"),document.querySelector(".contact_title_"+i.active).classList.add("active"),i.open||i.canvasOBJ.forEach(function(e,t){x.a.to(e.material.uniforms.scale,t==i.active-1?1.2:.8,{value:t==i.active-1?1.1:1.2,ease:Power2.easeInOut}),x.a.to(e.material.uniforms.vOpacity,t==i.active-1?1.2:.8,{value:t==i.active-1?1:.2,ease:Power2.easeInOut})}))}),te("#hire_us-file","change",function(){if(i.fileValidation())i.readyfile=!1;else if(i.validFileExtensions())i.readyfile=!1;else{var e=document.getElementById("hire_us-file").value;if(e){var t=0<=e.indexOf("\\")?e.lastIndexOf("\\"):e.lastIndexOf("/"),a=e.substring(t);0!==a.indexOf("\\")&&0!==a.indexOf("/")||(a=a.substring(1)),document.getElementById("file_name").innerHTML=a}i.readyfile=!0}}),t}var e,t,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(o,ne),e=o,(t=[{key:"send_form",value:function(e){for(var t=document.getElementsByClassName("hasError");0<t.length;)t[0].classList.remove("hasError");if(document.getElementById("error-message").innerHTML="",!e.validateFields()&&e.readyfile){var a=e.DOMElement.querySelector("#hire_us-name").value,n=e.DOMElement.querySelector("#hire_us-email").value,i=e.DOMElement.querySelector("#hire_us-number").value,o=e.DOMElement.querySelector("#hire_us-desc").value,r=a;1==e.active?r+=" - General Question":2==e.active?r+=" - Hire Skyline Films":3==e.active&&(r+=" - Training Session");var s=new FormData,l=document.querySelector("#hire_us-file");s.append("subject",r),s.append("name",a),s.append("email",n),s.append("number",i),s.append("message",o),s.append("image",l.files[0]),grecaptcha.ready(function(){grecaptcha.execute("",{action:"contact"}).then(function(e){s.append("token",e),x.a.to("#contact_loading",.6,{autoAlpha:1,ease:Power1.easeInOut}),fe.a.post("https://saharetminan.github.io/sendmail.php",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){e.data.success?(x.a.to("#contact_loading",0,{autoAlpha:0,ease:Power1.easeInOut}),x.a.to("#contact_overlay",.6,{autoAlpha:1,ease:Power1.easeInOut})):console.log("error")}).catch(function(e){console.log(e)})})})}}},{key:"goback",value:function(){var a=this;this.open&&(500<window.innerWidth?(this.open=!1,x.a.to(".contact_titles",.6,{y:"-50%",ease:Power1.easeInOut,delay:.4}),x.a.to(["#contact_send","#contact_back",".contact_mask"],.6,{autoAlpha:0}),x.a.to([".action",".contact_titles .small_btn"],.6,{autoAlpha:1,ease:Power1.easeInOut}),x.a.to(".contact_forms .row",.6,{autoAlpha:0,y:"10vw",ease:Power1.easeInOut,onComplete:function(){a.scrollTargetY=0,a.DOMElement.querySelector(".contact_forms").style.display="none",a.DOMElement.querySelectorAll("input").forEach(function(e){return e.value=null}),a.DOMElement.querySelector("textarea").value=null}}),this.canvasOBJ.forEach(function(e,t){x.a.to(e.material.uniforms.scale,.6,{value:t==a.active-1?1.1:1.2,ease:Power1.easeInOut,delay:.4}),x.a.to(e.material.uniforms.vOpacity,.6,{value:t==a.active-1?1:.2,ease:Power1.easeInOut,delay:.4})})):(this.open=!0,this.DOMElement.querySelector(".contact_forms").style.display="none",this.DOMElement.querySelectorAll("input").forEach(function(e){return e.value=null}),this.DOMElement.querySelector("textarea").value=null,x.a.set(".contact_titles .small_btn",{autoAlpha:0}),x.a.set(".contact_titles",{y:-(window.innerHeight-3*document.querySelector(".contact_titles").offsetHeight)/2}),x.a.to(".contact_titles",.6,{autoAlpha:1,ease:Power1.easeOut,delay:.4}),x.a.staggerTo(".contact_titles .text-title-3",.6,{y:0,ease:Power2.easeOut,delay:.4},.03),this.DOMElement.querySelector(".contact_forms").style.display="block",x.a.to(".contact_forms .row.name",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut,delay:.4}),x.a.to(["#contact_send",".contact_mask"],.6,{autoAlpha:1,delay:.4})))}},{key:"fileValidation",value:function(){var e=document.getElementById("hire_us-file");if(0<e.files.length)for(var t=0;t<=e.files.length-1;t++){var a=e.files.item(t).size;return 10240<=Math.round(a/1024)?(document.getElementById("error-file").innerHTML="File is too large. Max size 10mb",!0):(document.getElementById("error-file").innerHTML="",!1)}return!1}},{key:"validFileExtensions",value:function(){var e=[".jpg",".jpeg",".bmp",".png",".pdf",".doc",".docx"],t=document.getElementById("hire_us-file").value;if(0<t.length){for(var a=!1,n=0;n<e.length;n++){var i=e[n];if(t.substr(t.length-i.length,i.length).toLowerCase()==i.toLowerCase()){a=!0;break}}if(!a)return document.getElementById("error-file").innerHTML="File is invalid, allowed extensions are: "+e.join(", "),!0}return document.getElementById("error-file").innerHTML="",!1}},{key:"validateFields",value:function(){var e=!1,t=this.DOMElement.querySelector("#hire_us-name"),a=this.DOMElement.querySelector("#hire_us-email"),n=this.DOMElement.querySelector("#hire_us-number"),i=this.DOMElement.querySelector("#hire_us-desc");if(t.value.length<1&&(t.classList.add("hasError"),e=!0,document.getElementById("error-message").innerHTML="Name is required"),a.value.length<1?(e=!0,a.classList.add("hasError"),document.getElementById("error-message").innerHTML="Email is required"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.value)||(a.classList.add("hasError"),e=!0,document.getElementById("error-message").innerHTML="Email is not valid"),n.value.length<1&&(n.classList.add("hasError"),e=!0,document.getElementById("error-message").innerHTML="Number is required"),i.value.length<1&&(i.classList.add("hasError"),e=!0,document.getElementById("error-message").innerHTML="Message is required"),e)return e}},{key:"enter",value:function(){ye(ge(o.prototype),"enter",this).call(this)}},{key:"setup",value:function(){var e,t,a,n=this;ye(ge(o.prototype),"setup",this).call(this),e=document,t=e.createElement("script"),a=e.getElementsByTagName("script")[0],t.src="",a.parentNode.insertBefore(t,a),500<window.innerWidth?(x.a.to(".action",.6,{autoAlpha:1,ease:Power1.easeOut,delay:1.6}),x.a.to(".contact_titles",1.2,{autoAlpha:1,ease:Power1.easeOut,delay:.4}),x.a.staggerTo(".contact_titles .text-title-3",1.2,{y:0,ease:Power2.easeOut,delay:.4},.03),x.a.to(".contact_cover_image",1.2,{x:0,ease:Power2.easeOut,delay:.4}),x.a.to(".contact_cover_image_1",1.2,{y:"-50%",ease:Power2.easeOut,delay:1.6}),x.a.to(".contact_cover_image_3",1.2,{y:"50%",ease:Power2.easeOut,delay:1.6}),this.canvasOBJ.forEach(function(e,t){x.a.to(e.material.uniforms.scale,1.2,{value:t==n.active-1?1.1:1.2,ease:Power2.easeOut,delay:.4}),x.a.to(e.material.uniforms.vOpacity,1.2,{value:t==n.active-1?1:.2,ease:Power2.easeOut,delay:.4})})):(this.open=!0,x.a.set(".contact_titles .small_btn",{autoAlpha:0}),x.a.set(".contact_titles",{y:-(window.innerHeight-3*document.querySelector(".contact_titles").offsetHeight)/2}),x.a.to(".contact_titles",.6,{autoAlpha:1,ease:Power1.easeOut,delay:.4}),x.a.staggerTo(".contact_titles .text-title-3",.6,{y:0,ease:Power2.easeOut,delay:.4},.03),this.DOMElement.querySelector(".contact_forms").style.display="block",x.a.to(".contact_forms .row",.6,{autoAlpha:1,y:0,ease:Power1.easeInOut,delay:.4}),x.a.to(["#contact_send",".contact_mask"],.6,{autoAlpha:1,delay:.4}))}},{key:"exit",value:function(){ye(ge(o.prototype),"exit",this).call(this)}},{key:"scroll",value:function(e){ye(ge(o.prototype),"scroll",this).call(this,e)}},{key:"rAF",value:function(){ye(ge(o.prototype),"rAF",this).call(this)}}])&&me(e.prototype,t),a&&me(e,a),o}();function xe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _e=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.dom=e,this.trigger=t,this.newHeight=0,this.open=!1,x.a.set(this.dom,{height:this.newHeight,opacity:0,force3D:!0})}var e,t,n;return e=a,(t=[{key:"resize",value:function(){this.newHeight=this.open?this.dom.children[0].offsetHeight:0,x.a.set(this.dom,{height:this.newHeight,opacity:0,force3D:!0})}},{key:"toggle",value:function(){return this.open?(this.open=!1,this.newHeight=0,x.a.to(this.dom,1,{height:this.newHeight,opacity:0,ease:Power2.easeInOut})):(this.open=!0,this.newHeight=this.dom.children[0].offsetHeight,x.a.to(this.dom,1,{height:this.newHeight,opacity:1,ease:Power2.easeInOut})),this.newHeight}}])&&xe(e.prototype,t),n&&xe(e,n),a}();function Pe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var be=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a=this;this.isOpen=!1,this.dom=e,this.scrollObj=this.dom.querySelector(".small-slider"),this.scrollY=0,this.scrollTargetY=0,this.touched=!1,this.touchpos=0,this.touchtar=0,this.touchcur=0,this.touchstart=0,this.hasTouch="ontouchstart"in document,this.tl=new TimelineMax({paused:!0}),x.a.set("#case_gallery-overlay",{force3D:!0,rotation:.01}),this.tl.to("#case_gallery-overlay",.8,{x:"0%",ease:Power2.easeOut}).staggerFromTo(".small-display-image",1.2,{y:-window.innerHeight},{y:0,ease:Power2.easeOut},-.01,"-=0.4").fromTo(".small-slider",1.2,{opacity:0},{opacity:1,ease:Power2.easeOut},"-=1.2").fromTo(".large-display-images",1.2,{scale:1.1,opacity:0},{scale:1,opacity:1,ease:Power1.easeOut},"-=1").to("#case_gallery-close_gallery",.3,{autoAlpha:1,ease:Power1.easeOut},"-=0.6"),te("#case_gallery-overlay",this.hasTouch?"touchstart":"mousedown",function(e){t.onTouchStart(e)},!0),te("#case_gallery-overlay",this.hasTouch?"touchmove":"mousemove",function(e){t.onTouchMove(e)},!0),te(document,this.hasTouch?"touchend":"mouseup",function(e){t.onTouchEnd(e)},!0),te(".small-display-image","click",function(){a.toggle(this.getAttribute("data-hover"))}),te("#case_gallery-open_gallery","click",function(){return t.open()},!0),te("#case_gallery-close_gallery","click",function(){return t.close()},!0)}var e,t,a;return e=n,(t=[{key:"open",value:function(){this.isOpen=!0,this.tl.play()}},{key:"close",value:function(){this.isOpen=!1,this.tl.reverse()}},{key:"toggle",value:function(e){document.querySelector(".small-display-image.active").classList.remove("active"),document.querySelector(".large-display-image.active").classList.remove("active"),document.querySelector(".small-display-image-"+e).classList.add("active"),document.querySelector(".large-display-image-"+e).classList.add("active")}},{key:"resize",value:function(){x.a.set("#case_gallery-overlay",{x:this.isOpen?"0%":"100%"})}},{key:"onTouchStart",value:function(e){this.touched=!0,this.touchstart=this.hasTouch?e.touches[0].pageY:e.pageY,this.touchcur=this.scrollY,this.hasTouch||b.showarrow()}},{key:"onTouchMove",value:function(e){this.touched&&(this.scrollTargetY=this.touchcur+((this.hasTouch?e.touches[0].pageY:e.clientY)-window.innerHeight/2-(this.touchstart-window.innerHeight/2)))}},{key:"onTouchEnd",value:function(){this.touched=!1,this.snap(),this.hasTouch||b.hidearrow()}},{key:"snap",value:function(){this.scrollTargetY=Math.max(Math.min(this.scrollTargetY,0),-(this.scrollObj.offsetHeight-window.innerHeight))}}])&&Pe(e.prototype,t),a&&Pe(e,a),n}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ee(e,t,a){return(Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=Oe(this,Le(n).call(this,e))).videoDOM,t.clickreveal_=new _e(t.DOMElement.querySelector(".credits_overlay"),t.DOMElement.querySelector("#open_credit")),t.gallery_=new be(t.DOMElement.querySelector("#case_gallery-overlay")),t.countdown=new TimelineMax({paused:!0}),t.footerOut=!1,x.a.set(".clock circle",{drawSVG:"0%",rotation:-60,transformOrigin:"50% 50%"}),x.a.set(".clock path",{drawSVG:"0%"}),x.a.set(".clock g",{rotation:80,transformOrigin:"50% 50%"}),t.countdown.to(".clock circle",2,{drawSVG:"100%",rotation:110,ease:Power1.easeInOut}).set(".countdown-5",{autoAlpha:1},"-=2").to(".countdown-5",1,{autoAlpha:0,scale:1.6,ease:Power1.easeOut},"-=2").to(".clock path",1,{drawSVG:"80%",ease:Power1.easeInOut},"-=1").to(".clock g",2,{rotation:360},"-=1").set(".countdown-4",{autoAlpha:1},"-=2").to(".countdown-4",1,{autoAlpha:0,scale:1.6,ease:Power1.easeOut},"-=2").set(".countdown-3",{autoAlpha:1},"-=1").to(".countdown-3",1,{autoAlpha:0,scale:1.6,ease:Power1.easeOut},"-=1").to(".clock g",3,{rotation:90},"-=1").to(".clock path",2.5,{drawSVG:"0%",ease:Power1.easeInOut},"-=3").set(".countdown-2",{autoAlpha:1},"-=2").to(".countdown-2",1,{autoAlpha:0,scale:1.6,ease:Power1.easeOut},"-=2").set(".countdown-1",{autoAlpha:1},"-=1").to(".countdown-1",1,{autoAlpha:0,scale:1.6,ease:Power1.easeOut},"-=1").to(".clock",1,{scale:.2,autoAlpha:0,ease:Power1.easeInOut},"-=.5"),t.DOMElement.querySelector("#open_credit").addEventListener("click",function(){t.clickreveal_.toggle()}),t.DOMElement.querySelector(".footer .cover_title").addEventListener("click",function(){t.footerOut=!0,TweenLite.to(t.DOMElement.querySelector(".cover_countdown"),.6,{scale:0,autoAlpha:0,ease:Power1.easeIn})}),t.ready=!1,t}var e,t,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(n,ne),e=n,(t=[{key:"setup",value:function(){var e=this;if(Ee(Le(n.prototype),"setup",this).call(this),this.DOMElement.querySelector(".case_gallery-video video"))if(te("#close_trailer","click",function(){return e.videos[0].close()},!0),te("#case_gallery-open_video","click",function(){return e.videos[0].open()},!0),te("#record","click",function(){e.videos[0].video.paused?e.videos[0].play():e.videos[0].pause()},!0),this.videoDOM=this.DOMElement.querySelector(".case_gallery-video video"),_())this.videoDOM.play();else{this.canvasDOM.push(this.videoDOM),this.videoDOM.classList.add("canvasOBJ"),this.videoDOM.style.visibility="hidden";var t=new w.s(this.videoDOM);this.canvasTXR.push(t);var a=new w.f(this.geometry,this.createMat(t,0,1,1.2,0,!0));a.scale.set(this.videoDOM.clientWidth,this.videoDOM.clientHeight,1),this.canvasOBJ.push(a),this.scene.add(a)}this.matTop.uniforms.tDiffuse.value.needsUpdate=this.matBot.uniforms.tDiffuse.value.needsUpdate=!0,this.canvasTOP=new w.f(this.geometry,this.matTop),this.canvasTOP.scale.set(this.DOMElement.querySelector("#case_cover .cover_image").clientWidth,this.DOMElement.querySelector("#case_cover .cover_image").clientHeight,1),this.scene.add(this.canvasTOP),this.canvasBOT=new w.f(this.geometry,this.matBot),this.canvasBOT.scale.set(this.DOMElement.querySelector(".footer .cover_image").clientWidth,this.DOMElement.querySelector(".footer .cover_image").clientHeight,1),this.canvasBOT.position.y=-this.DOMElement.querySelector(".footer .cover_image").getBoundingClientRect().top-(this.DOMElement.querySelector(".footer .cover_image").clientHeight-window.innerHeight)/2,this.canvasBOT.position.z=-10,this.scene.add(this.canvasBOT),this.matTop.uniforms.colors.value={x:1,y:1,z:1},this.matBot.uniforms.colors.value={x:.25,y:.25,z:.25},x.a.set("#current-title",{y:0}),x.a.to("#current-title",.8,{scale:1.3,autoAlpha:1,ease:Power1.easeOut}),(this.matBot.uniforms.vOpacity.value=1)!=this.matTop.uniforms.vOpacity.value?x.a.to([this.matTop.uniforms.vOpacity],1,{value:1,ease:Power1.easeOut,onComplete:function(){e.ready=!0}}):this.ready=!0}},{key:"leave",value:function(){Ee(Le(n.prototype),"leave",this).call(this),this.ready=!1,x.a.staggerTo(".canvasOBJ",.8,{autoAlpha:0,xPercent:-50,ease:Power1.easeIn})}},{key:"exit",value:function(){this.webGL&&(this.canvasTOP.visible=!1),Ee(Le(n.prototype),"exit",this).call(this)}},{key:"resize",value:function(){Ee(Le(n.prototype),"resize",this).call(this),this.clickreveal_.resize(),this.gallery_.resize(),this.webGL&&(this.canvasTOP.scale.set(this.DOMElement.querySelector("#case_cover .cover_image").clientWidth,this.DOMElement.querySelector("#case_cover .cover_image").clientHeight,1),this.canvasBOT.scale.set(this.DOMElement.querySelector("#case_cover .cover_image").clientWidth,this.DOMElement.querySelector("#case_cover .cover_image").clientHeight,1))}},{key:"scroll",value:function(e){this.scrollAble&&(this.gallery_.isOpen?(this.gallery_.scrollTargetY-=e,this.gallery_.scrollTargetY=Math.max(Math.min(this.gallery_.scrollTargetY,0),-(this.gallery_.scrollObj.offsetHeight-window.innerHeight))):(this.scrollTargetY-=e,this.scrollTargetY=Math.max(Math.min(this.scrollTargetY,0),-(this.scrollElement.scrollHeight-window.innerHeight))))}},{key:"update",value:function(){this.ready&&this.matTop.uniforms.tDiffuse.value.image&&this.matBot.uniforms.tDiffuse.value.image&&(this.scrollY>1.2*-window.innerHeight?(this.matTop.uniforms.vOpacity.value=1-this.scrollY/-window.innerHeight,this.canvasTOP.scale.set(this.DOMElement.querySelector("#case_cover .cover_image").clientWidth*(1+this.scrollY/-window.innerHeight),this.DOMElement.querySelector("#case_cover .cover_image").clientHeight*(1+this.scrollY/-window.innerHeight),1),"VIDEO"==this.matTop.uniforms.tDiffuse.value.image.nodeName&&this.matTop.uniforms.tDiffuse.value.image.paused&&this.matTop.uniforms.tDiffuse.value.image.play()):this.scrollY<=1.2*-window.innerHeight&&"VIDEO"==this.matTop.uniforms.tDiffuse.value.image.nodeName&&(this.matTop.uniforms.tDiffuse.value.image.paused||this.matTop.uniforms.tDiffuse.value.image.pause()),_()||(this.videoDOM.getBoundingClientRect().top-window.innerHeight<0&&this.videoDOM.getBoundingClientRect().top>-1*this.videoDOM.clientHeight?this.videoDOM.paused&&this.videoDOM.play():this.videoDOM.paused||this.videoDOM.pause())),Ee(Le(n.prototype),"update",this).call(this)}},{key:"rAF",value:function(){Ee(Le(n.prototype),"rAF",this).call(this),this.moving||(500<window.innerWidth&&(this.gallery_.isOpen&&(this.gallery_.scrollY=Math.abs(this.gallery_.scrollTargetY-this.gallery_.scrollY)<.05?this.gallery_.scrollTargetY:this.gallery_.scrollY+.05*(this.gallery_.scrollTargetY-this.gallery_.scrollY)),x.a.set(this.gallery_.scrollObj,{y:this.gallery_.scrollY})),this.ready&&(this.footerOut||x.a.set("#current-title",{autoAlpha:1-this.scrollY/-window.innerHeight,y:this.scrollY/1.5}),this.scrollY<-100?1==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0})):0==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:1}),x.a.to("#scro",.3,{autoAlpha:1})),this.canvasBOT.position.y=-this.DOMElement.querySelector(".footer .cover_image").getBoundingClientRect().top-(this.DOMElement.querySelector(".footer .cover_image").clientHeight-window.innerHeight)/2))}}])&&Te(e.prototype,t),a&&Te(e,a),n}();function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function De(e,t,a){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=Xe(this,ke(a).call(this,e)),500<window.innerWidth&&t.DOMElement.querySelectorAll(".service_header-image").forEach(function(e){e.classList.add("canvasOBJ","visible")}),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,ne),e=a,(t=[{key:"enter",value:function(){De(ke(a.prototype),"enter",this).call(this),x.a.to(".service_header-title .text-title-3",.6,{autoAlpha:1,ease:Power1.easeOut}),x.a.to(".service_info",.6,{autoAlpha:1,ease:Power1.easeInOut,delay:1}),x.a.to(".back_to_list",.4,{autoAlpha:1,delay:1.2,ease:Power1.easeInOut}),x.a.set(".service_header-title",{force3D:!0})}},{key:"leave",value:function(){De(ke(a.prototype),"leave",this).call(this),x.a.to(".service_header-image",.8,{autoAlpha:0,xPercent:-100,ease:Power1.easeIn}),x.a.to([".service_info",".back_to_list"],.4,{autoAlpha:0,ease:Power1.easeIn}),x.a.to(".service_header-title .text-title-3",.8,{autoAlpha:0,xPercent:-50,ease:Power1.easeIn})}},{key:"exit",value:function(){De(ke(a.prototype),"exit",this).call(this)}},{key:"setup",value:function(){De(ke(a.prototype),"setup",this).call(this),500<window.innerWidth?x.a.staggerFromTo(".service_header-image",1.2,{xPercent:50},{xPercent:0,ease:Power2.easeOut,delay:.4},.1):x.a.staggerFromTo(".service_header-image",1.2,{autoAlpha:0,xPercent:50},{autoAlpha:1,xPercent:0,ease:Power2.easeOut,delay:.4},.1),this.canvasOBJ.forEach(function(e,t){return x.a.to(e.material.uniforms.vOpacity,1.2,{value:1,ease:Power2.easeOut,delay:.4+.1*t})})}},{key:"resize",value:function(){De(ke(a.prototype),"resize",this).call(this),this.DOMElement.classList.contains("")||(x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0}))}},{key:"rAF",value:function(){De(ke(a.prototype),"rAF",this).call(this),this.scrollY>=-window.innerHeight/1.5&&(x.a.set(".service_header-title",{y:this.scrollY/(768<window.innerWidth?2:1.5),autoAlpha:Math.min(Math.max(1-this.scrollY/-window.innerHeight*2,0),1)}),window.innerWidth<=768&&x.a.set(".back_to_list",{y:this.scrollY/1.2,autoAlpha:1-this.scrollY/-window.innerHeight*2})),this.DOMElement.classList.contains("")||(this.scrollY<-100?1==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0})):0==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:1}),x.a.to("#scro",.3,{autoAlpha:1})))}}])&&Me(e.prototype,t),n&&Me(e,n),a}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Qe(e,t,a){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ge(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=Re(this,Ge(a).call(this,e)),x.a.set([".left .year .after",".left .century .after"],{yPercent:120,autoAlpha:1}),500<window.innerWidth&&t.DOMElement.querySelectorAll(".service_header-image").forEach(function(e){e.classList.add("canvasOBJ","visible")}),t}var e,t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(a,ne),e=a,(t=[{key:"enter",value:function(){var t=this;Qe(Ge(a.prototype),"enter",this).call(this),x.a.to(".service_header-title .text-title-3",.6,{autoAlpha:1,ease:Power1.easeOut}),x.a.to(".service_info",.6,{autoAlpha:1,ease:Power1.easeInOut,delay:1}),x.a.to(".back_to_list",.4,{autoAlpha:1,delay:1.2,ease:Power1.easeInOut}),x.a.set([".service_header-title",".people_filmography .left"],{force3D:!0}),this.DOMElement.querySelector(".left .year .before").innerText=this.DOMElement.querySelector(".right .text-medium.active").getAttribute("data-year"),this.DOMElement.querySelector(".left .century .before").innerText=this.DOMElement.querySelector(".right .text-medium.active").getAttribute("data-century"),this.DOMElement.querySelectorAll(".right .text-medium").forEach(function(e){e.addEventListener("click",function(){t.DOMElement.querySelector(".right .text-medium.active").classList.remove("active"),e.classList.add("active"),t.DOMElement.querySelector(".left .year .after").innerText=e.getAttribute("data-year"),x.a.to(".left .year .after",.4,{yPercent:0,ease:Power1.easeInOut}),x.a.to(".left .year .before",.4,{yPercent:-120,ease:Power1.easeInOut,onComplete:function(){x.a.set(".left .year .before",{yPercent:0}),x.a.set(".left .year .after",{yPercent:120}),t.DOMElement.querySelector(".left .year .before").innerText=e.getAttribute("data-year")}}),t.DOMElement.querySelector(".left .century .after").innerText!=e.getAttribute("data-century")&&(t.DOMElement.querySelector(".left .century .after").innerText=e.getAttribute("data-century"),x.a.to(".left .century .after",.4,{yPercent:0,ease:Power1.easeInOut}),x.a.to(".left .century .before",.4,{yPercent:-120,ease:Power1.easeInOut,onComplete:function(){x.a.set(".left .century .before",{yPercent:0}),x.a.set(".left .century .after",{yPercent:120}),t.DOMElement.querySelector(".left .century .before").innerText=e.getAttribute("data-century")}}))})})}},{key:"setup",value:function(){Qe(Ge(a.prototype),"setup",this).call(this),500<window.innerWidth?x.a.staggerFromTo(".service_header-image",1.2,{xPercent:50},{xPercent:0,ease:Power2.easeOut,delay:.4},.1):x.a.staggerFromTo(".service_header-image",1.2,{autoAlpha:0,xPercent:50},{autoAlpha:1,xPercent:0,ease:Power2.easeOut,delay:.4},.1),this.canvasOBJ.forEach(function(e,t){return x.a.to(e.material.uniforms.vOpacity,1.2,{value:1,ease:Power2.easeOut,delay:.4+.1*t})})}},{key:"leave",value:function(){Qe(Ge(a.prototype),"leave",this).call(this),x.a.to(".service_header-image",.8,{autoAlpha:0,xPercent:-100,ease:Power1.easeIn}),x.a.to([".service_info",".back_to_list"],.4,{autoAlpha:0,ease:Power1.easeIn}),x.a.to(".service_header-title .text-title-3",.8,{autoAlpha:0,xPercent:-50,ease:Power1.easeIn})}},{key:"exit",value:function(){Qe(Ge(a.prototype),"exit",this).call(this)}},{key:"resize",value:function(){Qe(Ge(a.prototype),"resize",this).call(this),x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0})}},{key:"rAF",value:function(){Qe(Ge(a.prototype),"rAF",this).call(this),this.scrollY>=-window.innerHeight/1.5&&(x.a.set(".service_header-title",{y:this.scrollY/(768<window.innerWidth?2:1.5),autoAlpha:Math.min(Math.max(1-this.scrollY/-window.innerHeight*2,0),1)}),window.innerWidth<=768&&x.a.set(".back_to_list",{y:this.scrollY/1.2,opacity:1-this.scrollY/-window.innerHeight*2})),this.scrollY<-100?1==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:0}),x.a.to("#scro",.3,{autoAlpha:0})):0==document.querySelector("#instruction svg").style.opacity&&(x.a.to("#instruction svg",.3,{autoAlpha:1}),x.a.to("#scro",.3,{autoAlpha:1})),this.DOMElement.querySelector(".people_filmography").getBoundingClientRect().top<=window.innerHeight*(768<window.innerWidth?.12:.2)&&x.a.set(".people_filmography .left",{y:-(this.DOMElement.querySelector(".people_filmography").getBoundingClientRect().top-window.innerHeight*(768<window.innerWidth?.12:.2))})}}])&&Ce(e.prototype,t),n&&Ce(e,n),a}(),je=a(137);function Be(e,t,a,n,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function ze(s){return function(){var e=this,r=arguments;return new Promise(function(t,a){var n=s.apply(e,r);function i(e){Be(n,t,a,i,o,"next",e)}function o(e){Be(n,t,a,i,o,"throw",e)}i(void 0)})}}var Ve=new function(){var r=this,s=this;this.canvas1,this.menu,this.page,this.dataJSON,this.preloadLength=9,this.clickMask,this.start={x:0,y:0},this.move={x:0,y:0},this.target={x:0,y:0},this.curPos={x:window.innerWidth/2,y:window.innerHeight/2},this.curTar={x:window.innerWidth/2,y:window.innerHeight/2},this.mouseMult=-1!=navigator.userAgent.indexOf("Firefox")?16:1,this.dragDelta=_()?1:.6,this.swipeDelta=75,this.pos={now:0,then:10},this.touched=!1,this.hasWheelEvent="onwheel"in document,this.hasMouseWheelEvent="onmousewheel"in document,this.hasTouch="ontouchstart"in document,this.interact=!1,this.animate=!1,this.rAF_,this.copyMesh=!1,x.a.set("#instruction svg circle",{rotation:45,drawSVG:"0%",transformOrigin:"50% 50%"}),x.a.set("#cursor svg .inner_",{autoAlpha:1,rotation:-180,strokeWidth:4,drawSVG:"0%",transformOrigin:"50% 50%"}),x.a.set("#cursor svg .inner",{autoAlpha:1,strokeWidth:4,drawSVG:"0%",transformOrigin:"50% 50%"}),x.a.set("#cursor svg .outer",{autoAlpha:1,drawSVG:"0%",rotation:-120,transformOrigin:"50% 50%"}),x.a.set("#cursor svg .lens",{autoAlpha:1,strokeWidth:4,transformOrigin:"50% 50%"}),x.a.set("#cursor svg .lens path",{drawSVG:"0%"}),x.a.set("#cursor",{x:window.innerWidth/2,y:window.innerHeight/2}),this.scrollAnimation=new TimelineMax({paused:!1,repeat:-1}),this.scrollAnimation.to("#instruction svg circle",1.2,{rotation:225,drawSVG:"10% 100%",ease:Power2.easeIn}).to("#instruction svg circle",1.2,{rotation:405,drawSVG:"100% 100%",ease:Power2.easeOut}),this.preload=function(){x.a.to("#blur feGaussianBlur",1,{attr:{stdDeviation:0},roundProps:!1}),x.a.fromTo(".loading_logo .l2",.8,{x:11},{x:0,opacity:1,delay:.1,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .e",.8,{x:1},{x:0,opacity:1,delay:.12,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .i2",.8,{x:8},{x:0,opacity:1,delay:.1,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .l1",.8,{x:-3},{x:0,opacity:1,delay:.18,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .m",.8,{x:14},{x:0,opacity:1,delay:.22,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .f",.8,{x:5},{x:0,opacity:1,delay:.26,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .k",.8,{x:-12},{x:0,opacity:1,delay:.3,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .s1",.8,{x:-15},{x:0,opacity:1,delay:.33,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .s2",.8,{x:18},{x:0,opacity:1,delay:.36,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .y",.8,{x:-8},{x:0,opacity:1,delay:.42,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .i1",.8,{x:-1},{x:0,opacity:1,delay:.43,ease:Power1.easeOut}),x.a.fromTo(".loading_logo .n",.8,{x:1},{x:0,opacity:1,delay:.45,ease:Power1.easeOut}),x.a.to("#loading .small_btn",.8,{opacity:1,delay:1,ease:Power1.easeOut}),x.a.to("#cursor svg .inner_",4,{drawSVG:"100%",rotation:-90,delay:.8})},this.init=function(e){var t;r.clickMask=document.createElement("div"),r.clickMask.id="no-click",document.querySelector("#viewport").appendChild(r.clickMask),r.dataJSON=e,r.canvas1=new W(r.dataJSON,r.preloadLength),r.menu=new j,x.a.set(["#instruction","#current-title","#grid-main-title"],{force3D:!0}),te(window,"resize",Object(he.debounce)(function(){r.page&&r.page.resize(),r.canvas1&&r.canvas1.resize(),r.menu&&r.menu.resize(),r.interact||x.a.set("#cursor",{x:window.innerWidth/2,y:window.innerHeight/2}),("contact"!=P()||"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName)&&(document.querySelector("#error-small").style.display=window.innerHeight<=500?"flex":"none")},500)),te("#list-toggle","click",function(){r.canvas1.isGrid&&(r.canvas1.activeL=r.canvas1.totalCount-r.canvas1.getActiveRender(),Ve.canvas1.toggle(!1))},!0),te("#grid-toggle","click",function(){r.canvas1.isGrid||Ve.canvas1.toggle(!0)},!0),te("#grid-main-title","click",function(){r.canvas1.uniqueExit=!0}),te("#menu-button","click",function(){r.menu.open?(r.menu.closeMenu(),r.page.scrollAble=!0,"case"==P()&&!r.page.footerOut&&r.page.scrollElement&&r.page.scrollY<=-(r.page.scrollElement.scrollHeight-1.1*window.innerHeight)&&r.page.countdown.restart()):(r.page.scrollAble=!1,r.menu.openMenu())},!0),_()||(te(".main_hover","mouseenter",b.hoverin),te(".main_hover","mouseleave",b.hoverout),te("#menu-button","mouseenter",function(){r.menu.open||x.a.to("#redcircle",.3,{autoAlpha:0})},!0),te("#menu-button","mouseleave",function(){r.menu.open||x.a.to("#redcircle",.3,{autoAlpha:1})},!0)),x.a.to("#cursor svg .inner_",1.2,{drawSVG:"100%",rotation:-90,delay:.8,ease:Power1.easeOut,onComplete:(t=ze(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.to("#cursor svg .inner",7,{drawSVG:"50%"}),x.a.to("#cursor svg .lens",7,{rotation:360,ease:Power2.easeOut}),x.a.to("#cursor svg .lens path",7,{drawSVG:"33%",ease:Power2.easeOut}),e.next=5,r.canvas1.load(0,r.preloadLength,!0).then(r.rAF_=requestAnimationFrame(r.rAF));case 5:x.a.to("#cursor svg .lens",.8,{rotation:0,delay:1,ease:Power1.easeInOut}),x.a.to("#cursor svg .lens path",.8,{drawSVG:"0%",delay:1,ease:Power1.easeInOut}),x.a.to("#cursor svg .inner",1.6,{drawSVG:"100%",ease:Power1.easeInOut,onComplete:function(){r.clickMask.style.display="none",x.a.to(["#loading","#cursor svg .inner_"],.6,{autoAlpha:0,ease:Power1.easeInOut}),x.a.to("#loading .loading_logo",.6,{scale:1.2,ease:Power1.easeInOut,onComplete:function(){r.interact=!0,te(document,r.hasTouch?"touchstart":"mousedown",r.onTouchStart),te(document,r.hasTouch?"touchend":"mouseup",r.onTouchEnd),te(document,r.hasTouch?"touchmove":"mousemove",r.onTouchMove),te(document,r.hasWheelEvent?"wheel":null,Object(je.throttle)(r.onScroll,25)),r.barba()}}),_()?x.a.to("#cursor",.8,{scale:0,autoAlpha:0,ease:Power1.easeInOut,delay:.4,onComplete:function(){document.querySelector("#cursor").style.display="none"}}):(x.a.to(["#cursor svg .inner","#cursor svg .inner_"],.8,{scale:.08,ease:Power1.easeInOut,delay:.4}),x.a.to(["#cursor svg .inner","#cursor svg .inner_"],.4,{strokeWidth:40,delay:.8}))}});case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})})},this.onScroll=function(e){if(r.page.scrollAble){var t=e.deltaY;-1!=navigator.userAgent.indexOf("Firefox")&&1==e.deltaMode&&(t*=r.mouseMult),"index"==P()?r.canvas1.isGrid||(r.canvas1.setScroll(t),document.querySelector("#down").classList.contains("active")||document.querySelector("#down").classList.add("active"),x.a.to("#down",.3,{autoAlpha:0})):0!=r.page.ready&&r.page.scroll(t)}},this.onTouchStart=function(e){r.page.scrollAble&&(r.touched=!0,"index"==P()?(r.canvas1.wheel=!1,r.start={x:r.hasTouch?e.touches[0].pageX:e.pageX,y:r.hasTouch?e.touches[0].pageY:e.pageY},r.target={x:r.canvas1.tar.x,y:r.canvas1.tar.y},r.canvas1.hide(),x.a.to(r.canvas1.filmPass.uniforms.DistortDelta,.6,{value:2.2,ease:Power1.easeOut}),r.canvas1.isGrid?(document.querySelector("#drag").classList.contains("active")||document.querySelector("#drag").classList.add("active"),x.a.to("#drag",.3,{autoAlpha:0})):(document.querySelector("#down").classList.contains("active")||document.querySelector("#down").classList.add("active"),x.a.to("#down",.3,{autoAlpha:0}),_()||b.showarrow())):(r.start.y=r.hasTouch?e.touches[0].pageY:e.pageY,r.target.y=r.page.scrollY,r.pos.now=r.pos.then=r.page.scrollY)),_()||b.down()},this.onTouchMove=function(e){r.touched&&("index"==P()?(r.move={x:r.hasTouch?e.touches[0].pageX:e.clientX,y:r.hasTouch?e.touches[0].pageY:e.clientY},r.canvas1.tar.y=r.target.y+(r.move.y-window.innerHeight/2-(r.start.y-window.innerHeight/2))*r.dragDelta,r.canvas1.isGrid&&(r.canvas1.tar.x=r.target.x-(r.move.x-window.innerWidth/2-(r.start.x-window.innerWidth/2))*r.dragDelta)):(r.page.scrollTargetY=r.target.y+((r.hasTouch?e.touches[0].pageY:e.clientY)-window.innerHeight/2-(r.start.y-window.innerHeight/2))*r.dragDelta*(_()?1.2:1),r.page.scrollTargetY=Math.max(Math.min(r.page.scrollTargetY,0),-(r.page.scrollElement.scrollHeight-window.innerHeight)),r.pos.now=r.page.scrollTargetY)),_()||(r.curTar={x:e.clientX,y:e.clientY})},this.onTouchEnd=function(e){r.touched&&(r.touched=!1,_()||b.up(),"index"==P()?(r.canvas1.isGrid?(document.querySelector("#drag").classList.contains("active")||x.a.to("#drag",.3,{autoAlpha:1}),r.canvas1.displayG()):(document.querySelector("#down").classList.contains("active")||x.a.to("#down",.3,{autoAlpha:1}),r.canvas1.displayL(),_()||b.hidearrow()),x.a.to(r.canvas1.filmPass.uniforms.DistortDelta,.6,{value:0,ease:Power1.easeOut})):Math.abs(r.page.velocity)>=r.swipeDelta/2&&_()&&r.page.scroll(-r.page.velocity*Math.abs(r.page.velocity)/r.swipeDelta))},this.rAF=function(){r.page&&("index"==P()?(r.canvas1.pos.y=Math.abs(r.canvas1.tar.y-r.canvas1.pos.y)<(_()?.1:.05)?r.canvas1.tar.y:r.canvas1.pos.y+(r.canvas1.tar.y-r.canvas1.pos.y)*(_()?.1:.05),r.canvas1.pos.x=Math.abs(r.canvas1.tar.x-r.canvas1.pos.x)<(_()?.1:.05)?r.canvas1.tar.x:r.canvas1.pos.x+(r.canvas1.tar.x-r.canvas1.pos.x)*(_()?.1:.05),r.canvas1.wheel&&r.canvas1.tar.distanceTo(r.canvas1.pos)<(r.canvas1.isGrid?36:25)&&(r.canvas1.wheel=!1,r.canvas1.displayL(!0)),r.canvas1.isGrid&&!r.canvas1.list.visible?(r.canvas1.pos.y>r.canvas1.bound.x?(r.canvas1.pos.y=r.canvas1.bound.z,r.target.y=r.canvas1.bound.z+(r.target.y-r.canvas1.bound.x),r.canvas1.tar.y=r.canvas1.bound.z+(r.canvas1.tar.y-r.canvas1.bound.x)):r.canvas1.pos.y<r.canvas1.bound.z&&(r.canvas1.pos.y=r.canvas1.bound.x,r.target.y=r.canvas1.bound.x+(r.target.y-r.canvas1.bound.z),r.canvas1.tar.y=r.canvas1.bound.x+(r.canvas1.tar.y-r.canvas1.bound.z)),r.canvas1.pos.x>r.canvas1.bound.y?(r.canvas1.pos.x=r.canvas1.bound.w,r.target.x=r.canvas1.bound.w+(r.target.x-r.canvas1.bound.y),r.canvas1.tar.x=r.canvas1.bound.w+(r.canvas1.tar.x-r.canvas1.bound.y)):r.canvas1.pos.x<r.canvas1.bound.w&&(r.canvas1.pos.x=r.canvas1.bound.y,r.target.x=r.canvas1.bound.y+(r.target.x-r.canvas1.bound.w),r.canvas1.tar.x=r.canvas1.bound.y+(r.canvas1.tar.x-r.canvas1.bound.w))):x.a.set("#grid-list-title",{y:r.canvas1.pos.y}),r.canvas1.mesh.forEach(function(e){e.material.uniforms.translate.value=new w.p(8e-5*(r.canvas1.tar.x-r.canvas1.pos.x),8e-5*(r.canvas1.tar.y-r.canvas1.pos.y))}),r.canvas1.camera.position.set(r.canvas1.pos.x,r.canvas1.pos.y,0),r.renderCanvas&&r.canvas1.composer.render()):(r.page.rAF(),r.pos.then=r.page.scrollY,r.page.velocity=r.pos.now-r.pos.then,"case"==P()&&!r.page.footerOut&&r.page.scrollElement&&(r.page.scrollY<=-(r.page.scrollElement.scrollHeight-1.1*window.innerHeight)&&!r.page.countdown.isActive()?(_()||r.page.matBot.uniforms.tDiffuse.value.image.paused&&r.page.matBot.uniforms.tDiffuse.value.image.play(),r.page.countdown.restart(),r.page.countdown.eventCallback("onComplete",function(){!r.menu.open&&r.page.scrollAble&&(r.page.footerOut=!0,l.a.go(r.page.DOMElement.querySelector(".footer .cover_title").getAttribute("data-url"),"barba"))})):r.page.scrollY>-(r.page.scrollElement.scrollHeight-1.1*window.innerHeight)&&r.page.countdown.isActive()&&(r.page.countdown.pause(),_()||r.page.matBot.uniforms.tDiffuse.value.image.paused||r.page.matBot.uniforms.tDiffuse.value.image.pause())),r.page.scene&&r.page.camera&&r.canvas1.renderer.render(r.page.scene,r.page.camera))),!_()&&r.interact&&(r.curPos.y=Math.abs(r.curTar.y-r.curPos.y)<.05?r.curPos.y:r.curPos.y+.3*(r.curTar.y-r.curPos.y),r.curPos.x=Math.abs(r.curTar.x-r.curPos.x)<.05?r.curPos.x:r.curPos.x+.3*(r.curTar.x-r.curPos.x),x.a.set("#cursor",{x:r.curPos.x,y:r.curPos.y}),r.page.float.length&&"index"!=P()&&r.page.mouse(r.curPos)),r.rAF_=requestAnimationFrame(r.rAF)},this.case=function(e,t,a){var n=e,i=t,o=a;r.copyMesh&&(r.page.matTop.uniforms.vOpacity.value=1),r.page.enter().then(function(){if(r.clickMask.style.display="none",r.rAF_=requestAnimationFrame(r.rAF),r.canvas1.col[r.canvas1.active_.x].children[r.canvas1.active_.y].visible=!1,i>r.canvas1.totalCount-r.canvas1.projectCount)x.a.set(".grid-main-title-"+r.page.DOMElement.getAttribute("data-render")+" span",{autoAlpha:1,skewX:0,x:"0%"}),document.querySelector("#current-title").innerHTML=document.querySelector(".grid-main-title-"+i+" a").innerHTML;else{var t="";r.dataJSON[n].title_.split("").forEach(function(e){return t+="\n"==e?"<br>":e}),document.querySelector("#current-title").innerHTML=t}s.canvas1.isGrid&&"forward"!=o.trigger&&"back"!=o.trigger||(s.canvas1.active.y=s.canvas1.active_.y=Math.abs(i-s.canvas1.totalCount),s.canvas1.active.x=s.canvas1.active_.x=3,s.canvas1.pos.x=s.canvas1.tar.x=0),r.canvas1.active_.y<2&&(r.canvas1.active_.y+=r.canvas1.projectCount-(r.canvas1.projectCount>r.preloadLength?Math.ceil((r.canvas1.projectCount-r.preloadLength)/2):0),r.canvas1.active.y=r.canvas1.active_.y),s.canvas1.pos.y=s.canvas1.tar.y=(s.canvas1.meshGH_+s.canvas1.meshM_)*s.canvas1.rows/2-(s.canvas1.meshGH_+s.canvas1.meshM_)*s.canvas1.active_.y-(s.canvas1.rows%2!=0?(s.canvas1.meshGH+s.canvas1.meshM)*window.innerWidth/100/-2:0),r.copyMesh=!1})},this.barba=function(){"IntersectionObserver"in window&&l.a.use(u.a),l.a.hooks.beforeEnter(function(){var t=ze(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.next.container.getAttribute("data-barba-pagename"),r.page=new("about"==a?ue:"contact"==a?we:"case"==a?Ie:"service"==a?Ye:"people"==a?qe:ne)(t.next.container),"case"!=a){e.next=21;break}if(n=t.next.container.getAttribute("data-render"),i=r.canvas1.totalCount-n,n>r.canvas1.totalCount-r.canvas1.projectCount)return e.next=8,r.canvas1.cloneMat(!1,"forward"==t.trigger||"back"==t.trigger,n);e.next=15;break;case 8:return r.page.matTop=e.sent,e.next=11,r.canvas1.cloneMat(!0,!1,n);case 11:r.page.matBot=e.sent,r.case(i,n,t),e.next=19;break;case 15:return e.next=17,r.canvas1.cloneMat(!0,!1,0,!0);


  case 17:r.page.matBot=e.sent,_()?(new w.n).load("https://saharetminan.github.io/src/media/cover/"+r.dataJSON[i].route+"/"+r.dataJSON[i].image,function(e){e.minFilter=w.d,r.page.matTop=r.canvas1.createMat(e,!1),r.case(i,n,t)}):(r.page.matTop=r.canvas1.createMat(new w.s(r.page.DOMElement.querySelector("#case_cover .cover_image video")),!1),r.case(i,n,t));case 19:e.next=22;break;case 21:"index"==a?(r.clickMask.style.display="none",r.rAF_=requestAnimationFrame(r.rAF),r.renderCanvas=r.page.scrollAble=!0):(r.clickMask.style.display="none",r.rAF_=requestAnimationFrame(r.rAF),r.page.enter());case 22:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),l.a.hooks.beforeLeave(function(){return new Promise(function(t){r.page.scrollAble=!1,r.clickMask.style.display="block",r.menu.open?(r.menu.closeMenu(),setTimeout(function(){r.page.videos.length?"1"==document.querySelector("#trailer-overlay").style.opacity?r.page.videos.forEach(function(e){e.playing&&(e.close(),setTimeout(function(){t()},600))}):r.page.gallery_&&r.page.gallery_.isOpen?(r.page.gallery_.close(),setTimeout(function(){t()},1200)):t():t()},1e3)):r.page.videos.length?"1"==document.querySelector("#trailer-overlay").style.opacity?r.page.videos.forEach(function(e){e.playing&&(e.close(),setTimeout(function(){t()},600))}):r.page.gallery_&&r.page.gallery_.isOpen?(r.page.gallery_.close(),setTimeout(function(){t()},1200)):t():t()})}),l.a.hooks.afterLeave(function(){r.page.moving=!0,r.page.exit(),cancelAnimationFrame(r.rAF_)}),l.a.init({transitions:[{name:"front-transition",from:{namespace:["index"]},leave:function(){var t=this;return new Promise(function(e){s.canvas1.exit(),setTimeout(function(){t.renderCanvas=!1,e()},1e3)})}},{name:"front-transition-3",to:{namespace:["index"]},from:{namespace:["index"]}},{name:"case-transition-1",from:{namespace:["case"]},to:{namespace:["index"]},leave:function(t){return new Promise(function(e){0==s.page.scrollY?(s.page.moving=!0,t.current.container.getAttribute("data-render")>s.canvas1.totalCount-s.canvas1.projectCount?e():(x.a.to(s.page.matTop.uniforms.vOpacity,.5,{value:0,ease:Power1.easeInOut}),x.a.to("#current-title",.6,{autoAlpha:0,ease:Power1.easeInOut,onComplete:function(){e()}}))):x.a.to(s.page,1,{scrollY:0,ease:Power1.easeInOut,onComplete:function(){s.page.moving=!0,t.current.container.getAttribute("data-render")>s.canvas1.totalCount-s.canvas1.projectCount?e():(x.a.to(s.page.matTop.uniforms.vOpacity,.5,{value:0,ease:Power1.easeInOut}),x.a.to("#current-title",.6,{autoAlpha:0,ease:Power1.easeInOut,onComplete:function(){e()}}))}})})},enter:function(t){return new Promise(function(e){s.canvas1.enter(!(t.current.container.getAttribute("data-render")>s.canvas1.totalCount-s.canvas1.projectCount)),e()})}},{name:"case-transition-2",from:{namespace:["case"]},to:{namespace:["case"]},beforeLeave:function(){return new Promise(function(e){s.page.footerOut?(s.copyMesh=!0,s.page.countdown.eventCallback("onComplete",null),s.page.DOMElement.querySelector(".footer .cover_title").classList.add("active"),document.querySelector("#current-title").innerHTML=s.page.DOMElement.querySelector(".footer .cover_title").innerHTML,x.a.to(s.page,.3,{scrollY:-(s.page.scrollElement.scrollHeight-window.innerHeight),onComplete:function(){x.a.set(".footer .cover_title",{autoAlpha:0,delay:.3}),x.a.set("#current-title",{autoAlpha:1,y:0,delay:.3}),x.a.to(s.page.matBot.uniforms.colors.value,.6,{x:1,y:1,z:1,ease:Power1.easeInOut}),x.a.fromTo("#current-title",.6,{scale:1},{scale:1.3,ease:Power2.easeInOut,delay:.3,onComplete:function(){e()}})}})):(s.page.leave(),window.setTimeout(function(){return e()},1e3))})},leave:function(e){var t=e.next.container.getAttribute("data-render");s.canvas1.active.y=s.canvas1.active_.y=Math.abs(t-s.canvas1.totalCount),s.canvas1.active.x=s.canvas1.active_.x=3,s.canvas1.pos.x=s.canvas1.tar.x=0,s.page.moving=!0}},{name:"case-transition-3",from:{namespace:["case"]},to:{namespace:["about","service","people","contact"]},leave:function(){return new Promise(function(e){s.page.leave(),x.a.to([s.page.matTop.uniforms.vOpacity,s.page.matBot.uniforms.vOpacity],.8,{value:0,ease:Power1.easeIn}),x.a.to("#current-title",.8,{autoAlpha:0,ease:Power1.easeIn}),window.setTimeout(function(){return e()},1e3)})}},{name:"transition-default",from:{namespace:["case","about","service","people","contact"]},leave:function(){return new Promise(function(e){s.page.leave(),window.setTimeout(function(){return e()},1e3)})}},{name:"to-front-default",from:{namespace:["about","service","people","contact"]},to:{namespace:["index"]},leave:function(){return new Promise(function(e){s.page.leave(),window.setTimeout(function(){return e()},1e3)})},enter:function(){s.canvas1.enter(!0)}}]})}};a(344);document.body.classList.add(_()?"is-mobile":"is-desktop"),document.querySelector("#canvas1").classList.add(A()?"is-image":"is-video"),Ve.preload(),window.addEventListener("DOMContentLoaded",


  function(){
    fetch(
      "https://saharetminan.github.io/headless.json").then(function(e){
    200===e.status?e.json().then(function(e){Ve.init(e)}):console.error("Looks like there was a problem. Status Code: "+e.status)
  }).catch(function(e){
    console.
    error(
      "Fetch Error :-S",e
    )
  }
)
}
)},42:function(e,t){function a(t,a,n){var i,o,r,s,l;function c(){var e=Date.now()-s;e<a&&0<=e?i=setTimeout(c,a-e):(i=null,n||(l=t.apply(r,o),r=o=null))}null==a&&(a=100);function e(){r=this,o=arguments,s=Date.now();var e=n&&!i;return i=i||setTimeout(c,a),e&&(l=t.apply(r,o),r=o=null),l}return e.clear=function(){i&&(clearTimeout(i),i=null)},e.flush=function(){i&&(l=t.apply(r,o),r=o=null,clearTimeout(i),i=null)},e}a.debounce=a,e.exports=a},43:function(e,t,a){var n,i,o;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){var i=(o.prototype.then=function(a,n){var i=new o,e=this.s;if(e){var t=1&e?a:n;if(t){try{r(i,1,t(this.v))}catch(e){r(i,2,e)}return i}return this}return this.o=function(e){try{var t=e.v;1&e.s?r(i,1,a?a(t):t):n?r(i,1,n(t)):r(i,2,t)}catch(e){r(i,2,e)}},i},o);function o(){}function r(e,t,a){if(!e.s){if(a instanceof i){if(!a.s)return void(a.o=r.bind(null,e,t));1&t&&(t=a.s),a=a.v}if(a&&a.then)return void a.then(r.bind(null,e,t),r.bind(null,e,2));e.s=t,e.v=a;var n=e.o;n&&n(e)}}function u(e,t){try{var a=e()}catch(e){return t(e)}return a&&a.then?a.then(void 0,t):a}Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"));var e,a,n,t,s=((n=(e={exports:{}}).exports=function(r,t){return t=t||function(){},function(){var i=!1,o=arguments,e=new Promise(function(a,n){var e,t=r.apply({async:function(){return i=!0,function(e,t){e?n(e):a(t)}}},Array.prototype.slice.call(o));i||(!(e=t)||"object"!=ue(e)&&"function"!=typeof e||"function"!=typeof e.then?a(t):t.then(a,n))});return e.then(t.bind(null,null),t),e}}).cb=function(t,e){return n(function(){var e=Array.prototype.slice.call(arguments);return e.length===t.length-1&&e.push(this.async()),t.apply(this,e)},e)},e.exports);(t=a=a||{})[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug";function f(e){this.m=e}var l=a.off;f.getLevel=function(){return l},f.setLevel=function(e){return l=a[e]},f.prototype.error=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.error,a.error,e)},f.prototype.warn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.warn,a.warning,e)},f.prototype.info=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.info,a.info,e)},f.prototype.debug=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];this.P(console.log,a.debug,e)},f.prototype.P=function(e,t,a){t<=f.getLevel()&&e.apply(console,["["+this.m+"] "].concat(a))};function c(){this.logger=new f("@barba/core"),this.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeAppear","appear","afterAppear","appearCanceled","before","beforeLeave","leave","afterLeave","leaveCanceled","beforeEnter","enter","afterEnter","enterCanceled","after"],this.registered=new Map,this.init()}c.prototype.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(a){n[a]||(n[a]=function(e,t){void 0===t&&(t=null),n.registered.has(a)||n.registered.set(a,new Set),n.registered.get(a).add({ctx:t,fn:e})})})},c.prototype.do=function(e){for(var a=[],t=arguments.length-1;0<t--;)a[t]=arguments[t+1];if(this.registered.has(e)){var n=Promise.resolve();return this.registered.get(e).forEach(function(e){var t=e.ctx?e.fn.bind(e.ctx):e.fn;n=n.then(function(){return s(t).apply(void 0,a)})}),n}return Promise.resolve()},c.prototype.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},c.prototype.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var a=[];this.registered.forEach(function(e,t){return a.push(t)}),this.logger.info("Registered hooks: "+a.join(","))};function h(e,t,a){return e instanceof RegExp?function(e,t){if(!t)return e;var a=e.source.match(/\((?!\?)/g);if(a)for(var n=0;n<a.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,a){for(var n=[],i=0;i<e.length;i++)n.push(h(e[i],t,a).source);return new RegExp("(?:"+n.join("|")+")",A(a))}(e,t,a):(n=t,w(y(e,i=a),n,i));var n,i}var d=new c,p=y,m=g,v=w,_="/",P=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function y(e,t){for(var a,n=[],i=0,o=0,r="",s=t&&t.delimiter||_,l=t&&t.whitelist||void 0,c=!1;null!==(a=P.exec(e));){var u=a[0],h=a[1],d=a.index;if(r+=e.slice(o,d),o=d+u.length,h)r+=h[1],c=!0;else{var f="",p=a[2],m=a[3],v=a[4],y=a[5];if(!c&&r.length){var g=r.length-1,A=r[g];(!l||-1<l.indexOf(A))&&(f=A,r=r.slice(0,g))}r&&(n.push(r),r="",c=!1);var w=m||v,x=f||s;n.push({name:p||i++,prefix:f,delimiter:x,optional:"?"===y||"*"===y,repeat:"+"===y||"*"===y,pattern:w?w.replace(/([=!:$\/()])/g,"\\$1"):"[^"+b(x===s?x:x+s)+"]+?"})}}return(r||o<e.length)&&n.push(r+e.substr(o)),n}function g(c){for(var u=new Array(c.length),e=0;e<c.length;e++)"object"==ue(c[e])&&(u[e]=new RegExp("^(?:"+c[e].pattern+")$"));return function(e,t){for(var a="",n=t&&t.encode||encodeURIComponent,i=0;i<c.length;i++){var o=c[i];if("string"!=typeof o){var r,s=e?e[o.name]:void 0;if(Array.isArray(s)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but got array');if(0===s.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(r=n(s[l],o),!u[i].test(r))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'"');a+=(0===l?o.prefix:o.delimiter)+r}}else if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s){if(!o.optional)throw new TypeError('Expected "'+o.name+'" to be '+(o.repeat?"an array":"a string"))}else{if(r=n(String(s),o),!u[i].test(r))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+r+'"');a+=o.prefix+r}}else a+=o}return a}}function b(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function A(e){return e&&e.sensitive?"":"i"}function w(e,t,a){for(var n=(a=a||{}).strict,i=!1!==a.start,o=!1!==a.end,r=a.delimiter||_,s=[].concat(a.endsWith||[]).map(b).concat("$").join("|"),l=i?"^":"",c=0;c<e.length;c++){var u=e[c];if("string"==typeof u)l+=b(u);else{var h=u.repeat?"(?:"+u.pattern+")(?:"+b(u.delimiter)+"(?:"+u.pattern+"))*":u.pattern;t&&t.push(u),l+=u.optional?u.prefix?"(?:"+b(u.prefix)+"("+h+"))?":"("+h+")?":b(u.prefix)+"("+h+")"}}if(o)n||(l+="(?:"+b(r)+")?"),l+="$"===s?"$":"(?="+s+")";else{var d=e[e.length-1],f="string"==typeof d?d[d.length-1]===r:void 0===d;n||(l+="(?:"+b(r)+"(?="+s+"))?"),f||(l+="(?="+b(r)+"|"+s+")")}return new RegExp(l,A(a))}h.parse=p,h.compile=function(e,t){return g(y(e,t))},h.tokensToFunction=m,h.tokensToRegExp=v;function x(){this.g=F,this.A=new DOMParser,this.T=null}var F={container:"container",namespace:"pagename",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"};x.prototype.toString=function(e){return e.outerHTML},x.prototype.toDocument=function(e){return this.A.parseFromString(e,"text/html")},x.prototype.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},x.prototype.getHtml=function(e){return void 0===e&&(e=document),this.toString(e.documentElement)},x.prototype.getWrapper=function(e){return void 0===e&&(e=document),e.querySelector("["+this.g.prefix+'="'+this.g.wrapper+'"]')},x.prototype.getContainer=function(e){return void 0===e&&(e=document),e.querySelector("["+this.g.prefix+'="'+this.g.container+'"]')},x.prototype.removeContainer=function(e){document.body.contains(e)&&(this.T=e.nextElementSibling,e.parentNode.removeChild(e))},x.prototype.addContainer=function(e,t){this.T?t.insertBefore(e,this.T):t.appendChild(e)},x.prototype.getNamespace=function(e){void 0===e&&(e=document);var t=e.querySelector("["+this.g.prefix+"-"+this.g.namespace+"]");return t?t.getAttribute(this.g.prefix+"-"+this.g.namespace):null},x.prototype.getHref=function(e){if(e.tagName&&"a"===e.tagName.toLowerCase()){var t=e.getAttribute("href");if(t)return t.baseVal||t}return null};function T(){this.j=[]}var O=new x,E={current:{configurable:!0},previous:{configurable:!0},size:{configurable:!0}};T.prototype.init=function(e,t){var a={index:0,ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.j.push(a),window.history&&window.history.replaceState(a,"",a.url)},T.prototype.add=function(e,t,a,n){void 0===a&&(a=null),void 0===n&&(n=!0);var i={index:a||this.size,ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.j.push(i),n&&window.history&&window.history.pushState(i,"",i.url)},T.prototype.remove=function(){this.j.pop()},T.prototype.clear=function(){this.j=[]},T.prototype.update=function(e){var t=Object.assign({},this.current,e);this.current=t,window.history&&window.history.replaceState(t,"",t.url)},T.prototype.cancel=function(){this.remove(),window.history&&window.history.back()},T.prototype.get=function(e){return this.j[e]},T.prototype.getDirection=function(e){var t="popstate";return e<this.current.index?t="back":e>this.current.index&&(t="forward"),t},E.current.get=function(){return this.j[this.j.length-1]},E.current.set=function(e){this.j[this.j.length-1]=e},E.previous.get=function(){return this.j.length<2?null:this.j[this.j.length-2]},E.size.get=function(){return this.j.length},Object.defineProperties(T.prototype,E);function L(e,i){try{var t=function(){if(!i.next.html)return Promise.resolve(e).then(function(e){var t=i.next;if(e){var a=O.toElement(e);t.namespace=O.getNamespace(a),t.container=O.getContainer(a),t.html=e,D.update({ns:t.namespace});var n=O.toDocument(e);document.title=n.title}})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}function S(){return window.location.origin}function I(e){var t=e||window.location.port,a=window.location.protocol;return""!==t?parseInt(t,10):"https:"===a?443:80}function N(e){var t,a=e.replace(S(),""),n={},i=a.indexOf("#");0<=i&&(t=a.slice(i+1),a=a.slice(0,i));var o=a.indexOf("?");return 0<=o&&(n=Y(a.slice(o+1)),a=a.slice(0,o)),{hash:t,path:a,query:n}}function M(e){return e.replace(/(\/#.*|\/|#.*)$/,"")}function X(e){if(this.k=[],"boolean"==typeof e)this.O=e;else{var t=Array.isArray(e)?e:[e];this.k=t.map(function(e){return k(e)})}}var D=new T,k=h,H={update:L,nextTick:function(){return new Promise(function(e){window.requestAnimationFrame(e)})},pathToRegexp:k},Y=function(e){return e.split("&").reduce(function(e,t){var a=t.split("=");return e[a[0]]=a[1],e},{})},U={getHref:function(){return window.location.href},getOrigin:S,getPort:I,getPath:function(e){return N(e).path},parse:N,parseQuery:Y,clean:M};X.prototype.checkUrl=function(e){if("boolean"==typeof this.O)return this.O;var t=N(e).path;return this.k.some(function(e){return null!==e.exec(t)})};var C,R=((C=X)&&(Q.__proto__=C),((Q.prototype=Object.create(C&&C.prototype)).constructor=Q).prototype.set=function(e,t,a){return this.checkUrl(e)||this.j.set(e,{action:a,request:t}),{action:a,request:t}},Q.prototype.get=function(e){return this.j.get(e)},Q.prototype.getRequest=function(e){return this.j.get(e).request},Q.prototype.getAction=function(e){return this.j.get(e).action},Q.prototype.has=function(e){return this.j.has(e)},Q.prototype.delete=function(e){return this.j.delete(e)},Q.prototype.update=function(e,t){var a=Object.assign({},this.j.get(e),t);return this.j.set(e,a),a},Q);function Q(e){C.call(this,e),this.j=new Map}function G(i,o,r){return void 0===o&&(o=2e3),new Promise(function(t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)t(n.responseText);else if(n.status){var e={status:n.status,statusText:n.statusText};r(i,e),a(e)}},n.ontimeout=function(){var e=new Error("Timeout error ["+o+"]");r(i,e),a(e)},n.onerror=function(){var e=new Error("Fetch error");r(i,e),a(e)},n.open("GET",i),n.timeout=o,n.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),n.setRequestHeader("x-barba","yes"),n.send()})}function W(){return!window.history.pushState}function q(e){return!e.el||!e.href}function j(e){var t=e.event;return 1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey}function B(e){var t=e.el;return t.hasAttribute("target")&&"_blank"===t.target}function z(e){var t=e.el;return void 0!==t.protocol&&window.location.protocol!==t.protocol||void 0!==t.hostname&&window.location.hostname!==t.hostname}function V(e){var t=e.el;return void 0!==t.port&&I()!==I(t.port)}function J(e){var t=e.el;return t.getAttribute&&"string"==typeof t.getAttribute("download")}function $(e){return e.el.hasAttribute(F.prefix+"-"+F.prevent)}function K(e){return Boolean(e.el.closest("["+F.prefix+"-"+F.prevent+'="all"]'))}function Z(e){return M(e.href)===M(window.location.href)}function ee(e){void 0===e&&(e=[]),this.logger=new f("@barba/core"),this.all=[],this.appear=[],this.R=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}var te,ae=((te=X)&&(ne.__proto__=te),((ne.prototype=Object.create(te&&te.prototype)).constructor=ne).prototype.init=function(){this.add("pushState",W),this.add("exists",q),this.add("newTab",j),this.add("blank",B),this.add("corsDomain",z),this.add("corsPort",V),this.add("download",J),this.add("preventSelf",$),this.add("preventAll",K),this.add("sameUrl",Z,!1)},ne.prototype.add=function(e,t,a){void 0===a&&(a=!0),this.tests.set(e,t),a&&this.suite.push(e)},ne.prototype.run=function(e,t,a,n){return this.tests.get(e)({el:t,event:a,href:n})},ne.prototype.checkLink=function(t,a,n){var i=this;return this.suite.some(function(e){return i.run(e,t,a,n)})},ne);function ne(e){te.call(this,e),this.suite=[],this.tests=new Map,this.init()}ee.prototype.add=function(e,t){switch(e){case"rule":this.R.splice(t.position||0,0,t.value);break;case"transition":default:this.all.push(t)}this.update()},ee.prototype.resolve=function(i,o){var e,r=this;void 0===o&&(o={});var t=o.appear?this.appear:this.all;t=t.filter(o.self?function(e){return e.name&&"self"===e.name}:function(e){return!e.name||"self"!==e.name});var s=new Map,a=t.find(function(t){var a=!0,n={};return!(!o.self||"self"!==t.name)||(r.R.reverse().forEach(function(e){a&&(a=r.L(t,e,i,n),o.appear||(t.from&&t.to&&(a=r.L(t,e,i,n,"from")&&r.L(t,e,i,n,"to")),t.from&&!t.to&&(a=r.L(t,e,i,n,"from")),!t.from&&t.to&&(a=r.L(t,e,i,n,"to"))))}),s.set(t,n),a)}),n=s.get(a),l=[];if(l.push(o.appear?"appear":"page"),o.self&&l.push("self"),n){var c=[a];0<Object.keys(n).length&&c.push(n),(e=this.logger).info.apply(e,["Transition found ["+l.join(",")+"]"].concat(c))}else this.logger.info("No transition found ["+l.join(",")+"]");return a},ee.prototype.update=function(){var t=this;this.all=this.all.map(function(e){return t.M(e)}).sort(function(e,t){return e.priority-t.priority}).reverse().map(function(e){return delete e.priority,e}),this.appear=this.all.filter(function(e){return void 0!==e.appear})},ee.prototype.L=function(e,t,a,n,i){var o=!0,r=!1,s=e,l=t.name,c=l,u=l,h=l,d=i?s[i]:s,f="to"===i?a.next:a.current;if((!i||d)&&d[l]){switch(t.type){case"strings":default:var p=Array.isArray(d[c])?d[c]:[d[c]];f[c]&&-1!==p.indexOf(f[c])&&(r=!0),-1===p.indexOf(f[c])&&(o=!1);break;case"object":var m=Array.isArray(d[u])?d[u]:[d[u]];f[u]&&(f[u].name&&-1!==m.indexOf(f[u].name)&&(r=!0),-1===m.indexOf(f[u].name)&&(o=!1));break;case"function":d[h](a)?r=!0:o=!1}r&&(i?(n[i]=n[i]||{},n[i][l]=s[i][l]):n[l]=s[l])}return o},ee.prototype.S=function(e,t,a){var n=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(n+=Math.pow(10,a),e.from&&e.from[t]&&(n+=1),e.to&&e.to[t]&&(n+=2)),n},ee.prototype.M=function(a){var n=this,i=a.priority=0;return this.R.forEach(function(e,t){i+=n.S(a,e.name,t+1)}),a.priority=i,a};function ie(e){void 0===e&&(e=[]),this.logger=new f("@barba/core"),this.$=!1,this.store=new ee(e)}var oe={isRunning:{configurable:!0},hasAppear:{configurable:!0},hasSelf:{configurable:!0},shouldWait:{configurable:!0}};ie.prototype.get=function(e,t){return this.store.resolve(e,t)},oe.isRunning.get=function(){return this.$},oe.isRunning.set=function(e){this.$=e},oe.hasAppear.get=function(){return 0<this.store.appear.length},oe.hasSelf.get=function(){return this.store.all.some(function(e){return"self"===e.name})},oe.shouldWait.get=function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})},ie.prototype.doAppear=function(e){var t=e.data,a=e.transition;try{function n(){i.$=!1}var i=this,o=a||{};i.$=!0;var r=u(function(){return Promise.resolve(i.q("beforeAppear",t,o)).then(function(){return Promise.resolve(i.appear(t,o)).then(function(){return Promise.resolve(i.q("afterAppear",t,o)).then(function(){})})})},function(e){throw i.$=!1,i.logger.error(e),new Error("Transition error [appear]")});return r&&r.then?r.then(n):n()}catch(e){return Promise.reject(e)}},ie.prototype.doPage=function(e){var n=e.data,t=e.transition,i=e.page,o=e.wrapper;try{function a(){r.$=!1}var r=this,s=t||{},l=!0===s.sync||!1;r.$=!0;var c=u(function(){function e(){return Promise.resolve(r.q("before",n,s)).then(function(){function e(e){return Promise.resolve(r.q("after",n,s)).then(function(){return Promise.resolve(r.remove(n)).then(function(){})})}var t=function(){if(l)return u(function(){return Promise.resolve(r.add(n,o)).then(function(){return Promise.resolve(r.q("beforeLeave",n,s)).then(function(){return Promise.resolve(r.q("beforeEnter",n,s)).then(function(){return Promise.resolve(Promise.all([r.leave(n,s),r.enter(n,s)])).then(function(){return Promise.resolve(r.q("afterLeave",n,s)).then(function(){return Promise.resolve(r.q("afterEnter",n,s)).then(function(){})})})})})})},function(){throw new Error("Transition error [page][sync]")});function e(){return u(function(){var e=function(){if(!1!==t)return Promise.resolve(r.add(n,o)).then(function(){return Promise.resolve(r.q("beforeEnter",n,s)).then(function(){return Promise.resolve(r.enter(n,s,t)).then(function(){return Promise.resolve(r.q("afterEnter",n,s)).then(function(){})})})})}();if(e&&e.then)return e.then(function(){})},function(){throw new Error("Transition error [page][enter]")})}var t=!1,a=u(function(){return Promise.resolve(r.q("beforeLeave",n,s)).then(function(){return Promise.resolve(Promise.all([r.leave(n,s),L(i,n)]).then(function(e){return e[0]})).then(function(e){return t=e,Promise.resolve(r.q("afterLeave",n,s)).then(function(){})})})},function(){throw new Error("Transition error [page][leave]")});return a&&a.then?a.then(e):e()}();return t&&t.then?t.then(e):e()})}var t=function(){if(l)return Promise.resolve(L(i,n)).then(function(){})}();return t&&t.then?t.then(e):e()},function(e){throw r.$=!1,r.logger.error(e),new Error("Transition error")});return c&&c.then?c.then(a):a()}catch(e){return Promise.reject(e)}},ie.prototype.appear=function(e,t){try{return Promise.resolve(d.do("appear",e,t)).then(function(){return t.appear?s(t.appear)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},ie.prototype.leave=function(e,t){try{return Promise.resolve(d.do("leave",e,t)).then(function(){return t.leave?s(t.leave)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},ie.prototype.enter=function(e,t,a){try{return Promise.resolve(d.do("enter",e,t)).then(function(){return t.enter?s(t.enter)(e,a):Promise.resolve()})}catch(e){return Promise.reject(e)}},ie.prototype.add=function(e,t){try{O.addContainer(e.next.container,t),d.do("nextAdded",e)}catch(e){return Promise.reject(e)}},ie.prototype.remove=function(e){try{O.removeContainer(e.current.container),d.do("currentRemoved",e)}catch(e){return Promise.reject(e)}},ie.prototype.q=function(e,t,a){try{return Promise.resolve(d.do(e,t,a)).then(function(){return a[e]?s(a[e])(t):Promise.resolve()})}catch(e){return Promise.reject(e)}},Object.defineProperties(ie.prototype,oe);function re(e){var t=this;this.names=["beforeAppear","afterAppear","beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==e.length&&(e.forEach(function(e){t.byNamespace.set(e.namespace,e)}),this.names.forEach(function(e){d[e](t.C(e),t)}))}re.prototype.C=function(n){var i=this;return function(e){var t=n.match(/enter/i)?e.next:e.current,a=i.byNamespace.get(t.namespace);a&&a[n]&&a[n](e)}},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});function se(){this.version="2.6.0",this.schemaPage=le,this.Logger=f,this.logger=new f("@barba/core"),this.plugins=[],this.hooks=d,this.dom=O,this.helpers=H,this.history=D,this.request=G,this.url=U}var le={container:void 0,html:void 0,namespace:void 0,url:{hash:void 0,href:void 0,path:void 0,query:{}}},ce={data:{configurable:!0},wrapper:{configurable:!0}};return se.prototype.use=function(e,t){var a=this.plugins;-1<a.indexOf(e)?this.logger.warn("Plugin ["+e.name+"] already installed."):"function"==typeof e.install?(e.install(this,t),a.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},se.prototype.init=function(e){void 0===e&&(e={});var t=e.transitions;void 0===t&&(t=[]);var a=e.views;void 0===a&&(a=[]);var n=e.prevent;void 0===n&&(n=null);var i=e.timeout;void 0===i&&(i=2e3);var o=e.requestError,r=e.cacheIgnore;void 0===r&&(r=!1);var s=e.prefetchIgnore;void 0===s&&(s=!1);var l=e.schema;void 0===l&&(l=F);var c=e.debug;void 0===c&&(c=!1);var u=e.logLevel;if(void 0===u&&(u="off"),f.setLevel(!0===c?"debug":u),this.logger.info(this.version),Object.keys(l).forEach(function(e){F[e]&&(F[e]=l[e])}),this.B=o,this.timeout=i,this.cacheIgnore=r,this.prefetchIgnore=s,this.H=this.dom.getWrapper(),!this.H)throw new Error("[@barba/core] No Barba wrapper found");this.H.setAttribute("aria-live","polite"),this.I();var h=this.data.current;if(!h.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new R(r),this.prevent=new ae(s),this.transitions=new ie(t),this.views=new re(a),null!==n){if("function"!=typeof n)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",n)}this.history.init(h.url.href,h.namespace),this.N=this.N.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.X(),this.plugins.forEach(function(e){return e.init()});var d=this.data;d.trigger="barba",d.next=d.current,this.hooks.do("ready",d),this.appear(d),this.I()},se.prototype.destroy=function(){this.I(),this._(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ce.data.get=function(){return this.F},ce.wrapper.get=function(){return this.H},se.prototype.force=function(e){window.location.assign(e)},se.prototype.go=function(e,t,a){var n;if(void 0===t&&(t="barba"),this.transitions.isRunning)this.force(e);else if(!(n="popstate"===t?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf){if("popstate"===t){var i=a.state;t=this.history.getDirection(i.index),this.history.add(e,i.ns,i.index,!1)}else this.history.add(e,"tmp");return a&&(a.stopPropagation(),a.preventDefault()),this.page(e,t,n)}},se.prototype.appear=function(a){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",a)).then(function(){function e(){return Promise.resolve(n.hooks.do("afterEnter",a)).then(function(){})}var t=function(){if(n.transitions.hasAppear){var e=u(function(){var e=n.transitions.get(a,{appear:!0});return Promise.resolve(n.transitions.doAppear({transition:e,data:a})).then(function(){})},function(e){n.logger.error(e)});if(e&&e.then)return e.then(function(){})}}();return t&&t.then?t.then(e):e()})}catch(a){return Promise.reject(a)}},se.prototype.page=function(e,t,a){try{function n(){var t=i.data;return Promise.resolve(i.hooks.do("page",t)).then(function(){var e=u(function(){var e=i.transitions.get(t,{appear:!1,self:a});return Promise.resolve(i.transitions.doPage({data:t,page:o,transition:e,wrapper:i.H})).then(function(){i.I()})},function(e){i.logger.error(e)});if(e&&e.then)return e.then(function(){})})}var i=this;i.data.next.url=Object.assign({},{href:e},i.url.parse(e)),i.data.trigger=t;var o=i.cache.has(e)?i.cache.update(e,{action:"click"}).request:i.cache.set(e,i.request(e,i.timeout,i.onRequestError.bind(i,t)),"click").request,r=function(){if(i.transitions.shouldWait)return Promise.resolve(L(o,i.data)).then(function(){})}();return r&&r.then?r.then(n):n()}catch(e){return Promise.reject(e)}},se.prototype.onRequestError=function(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];this.transitions.isRunning=!1;var n=t[0],i=t[1],o=this.cache.getAction(n);return this.cache.delete(n),!(this.B&&!1===this.B(e,o,n,i)||("click"===o&&this.force(n),1))},se.prototype.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(e){t.logger.error(e)}),"prefetch")},se.prototype.X=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.N),document.addEventListener("touchstart",this.N)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},se.prototype._=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.N),document.removeEventListener("touchstart",this.N)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},se.prototype.N=function(e){var t=this,a=this.G(e);if(a){var n=this.dom.getHref(a);this.prevent.checkUrl(n)||this.cache.has(n)||this.cache.set(n,this.request(n,this.timeout,this.onRequestError.bind(this,a)).catch(function(e){t.logger.error(e)}),"enter")}},se.prototype.U=function(e){var t=this.G(e);t&&this.go(this.dom.getHref(t),t,e)},se.prototype.D=function(e){this.go(this.url.getPath(this.url.getHref()),"popstate",e)},se.prototype.G=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},se.prototype.I=function(){var e=this.url.getPath(this.url.getHref()),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:Object.assign({},{href:e},this.url.parse(e))};this.F={current:t,next:Object.assign({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},Object.defineProperties(se.prototype,ce),new se},"object"==ue(t)&&void 0!==e?e.exports=o():void 0===(i="function"==typeof(n=o)?n.call(t,a,t,e):n)||(e.exports=i)}});
